<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE RecordWildCards, TupleSections #-}</span><span>
</span><a name="line-2"></a><span class="hs-pragma">{-# OPTIONS_GHC -fno-warn-incomplete-patterns #-}</span><span>
</span><a name="line-3"></a><span>
</span><a name="line-4"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">HLint</span><span class="hs-special">(</span><a href="HLint.html#hlint"><span class="hs-identifier hs-var">hlint</span></a><span class="hs-special">,</span><span> </span><a href="HLint.html#readAllSettings"><span class="hs-identifier hs-var">readAllSettings</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-5"></a><span>
</span><a name="line-6"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-7"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Monad.Extra</span><span>
</span><a name="line-8"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Exception</span><span>
</span><a name="line-9"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Concurrent.Extra</span><span>
</span><a name="line-10"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.Console.CmdArgs.Verbosity</span><span>
</span><a name="line-11"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List.Extra</span><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">GHC.Conc</span><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.Exit</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.IO.Extra</span><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.Time.Extra</span><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Tuple.Extra</span><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span>
</span><a name="line-18"></a><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Version.Extra</span><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.Process.Extra</span><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Maybe</span><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.Directory</span><span>
</span><a name="line-23"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System.FilePath</span><span>
</span><a name="line-24"></a><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><a href="CmdLine.html"><span class="hs-identifier">CmdLine</span></a><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><a href="Config.Read.html"><span class="hs-identifier">Config.Read</span></a><span>
</span><a name="line-27"></a><span class="hs-keyword">import</span><span> </span><a href="Config.Type.html"><span class="hs-identifier">Config.Type</span></a><span>
</span><a name="line-28"></a><span class="hs-keyword">import</span><span> </span><a href="Config.Compute.html"><span class="hs-identifier">Config.Compute</span></a><span>
</span><a name="line-29"></a><span class="hs-keyword">import</span><span> </span><a href="Report.html"><span class="hs-identifier">Report</span></a><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><a href="Idea.html"><span class="hs-identifier">Idea</span></a><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><a href="Apply.html"><span class="hs-identifier">Apply</span></a><span>
</span><a name="line-32"></a><span class="hs-keyword">import</span><span> </span><a href="Test.All.html"><span class="hs-identifier">Test.All</span></a><span>
</span><a name="line-33"></a><span class="hs-keyword">import</span><span> </span><a href="Hint.All.html"><span class="hs-identifier">Hint.All</span></a><span>
</span><a name="line-34"></a><span class="hs-keyword">import</span><span> </span><a href="Grep.html"><span class="hs-identifier">Grep</span></a><span>
</span><a name="line-35"></a><span class="hs-keyword">import</span><span> </span><a href="Timing.html"><span class="hs-identifier">Timing</span></a><span>
</span><a name="line-36"></a><span class="hs-keyword">import</span><span> </span><a href="Test.Proof.html"><span class="hs-identifier">Test.Proof</span></a><span>
</span><a name="line-37"></a><span class="hs-keyword">import</span><span> </span><a href="Parallel.html"><span class="hs-identifier">Parallel</span></a><span>
</span><a name="line-38"></a><span class="hs-keyword">import</span><span> </span><a href="HSE.All.html"><span class="hs-identifier">HSE.All</span></a><span>
</span><a name="line-39"></a><span class="hs-keyword">import</span><span> </span><a href="CC.html"><span class="hs-identifier">CC</span></a><span>
</span><a name="line-40"></a><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span class="hs-comment">-- | This function takes a list of command line arguments, and returns the given hints.</span><span>
</span><a name="line-43"></a><span class="hs-comment">--   To see a list of arguments type @hlint --help@ at the console.</span><span>
</span><a name="line-44"></a><span class="hs-comment">--   This function writes to the stdout/stderr streams, unless @--quiet@ is specified.</span><span>
</span><a name="line-45"></a><span class="hs-comment">--</span><span>
</span><a name="line-46"></a><span class="hs-comment">--   As an example:</span><span>
</span><a name="line-47"></a><span class="hs-comment">--</span><span>
</span><a name="line-48"></a><span class="hs-comment">-- &gt; do hints &lt;- hlint [&quot;src&quot;, &quot;--ignore=Use map&quot;,&quot;--quiet&quot;]</span><span>
</span><a name="line-49"></a><span class="hs-comment">-- &gt;    when (length hints &gt; 3) $ error &quot;Too many hints!&quot;</span><span>
</span><a name="line-50"></a><span class="hs-comment">--</span><span>
</span><a name="line-51"></a><span class="hs-comment">--   /Warning:/ The flags provided by HLint are relatively stable, but do not have the same</span><span>
</span><a name="line-52"></a><span class="hs-comment">--   API stability guarantees as the rest of the strongly-typed API. Do not run this function</span><span>
</span><a name="line-53"></a><span class="hs-comment">--   on your server with untrusted input.</span><span>
</span><a name="line-54"></a><span class="hs-identifier">hlint</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-55"></a><a name="hlint"><a href="HLint.html#hlint"><span class="hs-identifier">hlint</span></a></a><span> </span><a name="local-6989586621679312283"><a href="#local-6989586621679312283"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-56"></a><span>    </span><a name="local-6989586621679312284"><a href="#local-6989586621679312284"><span class="hs-identifier">cmd</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="CmdLine.html#getCmd"><span class="hs-identifier hs-var">getCmd</span></a><span> </span><a href="#local-6989586621679312283"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-57"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-58"></a><span>        </span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-59"></a><span>            </span><a href="Timing.html#startTimings"><span class="hs-identifier hs-var">startTimings</span></a><span>
</span><a name="line-60"></a><span>            </span><span class="hs-special">(</span><a name="local-6989586621679312285"><a href="#local-6989586621679312285"><span class="hs-identifier">time</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679312286"><a href="#local-6989586621679312286"><span class="hs-identifier">xs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">duration</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="HLint.html#hlintMain"><span class="hs-identifier hs-var">hlintMain</span></a><span> </span><a href="#local-6989586621679312283"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-61"></a><span>            </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">cmdTiming</span><span> </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-62"></a><span>                </span><a href="Timing.html#printTimings"><span class="hs-identifier hs-var">printTimings</span></a><span>
</span><a name="line-63"></a><span>                </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;Took &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">showDuration</span><span> </span><a href="#local-6989586621679312285"><span class="hs-identifier hs-var">time</span></a><span>
</span><a name="line-64"></a><span>            </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier">cmdNoExitCode</span><span> </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><a href="#local-6989586621679312286"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-65"></a><span>        </span><a href="CmdLine.html#CmdGrep"><span class="hs-identifier hs-var">CmdGrep</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HLint.html#hlintGrep"><span class="hs-identifier hs-var">hlintGrep</span></a><span> </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-66"></a><span>        </span><a href="CmdLine.html#CmdHSE"><span class="hs-identifier hs-var">CmdHSE</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HLint.html#hlintHSE"><span class="hs-identifier hs-var">hlintHSE</span></a><span>  </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-67"></a><span>        </span><a href="CmdLine.html#CmdTest"><span class="hs-identifier hs-var">CmdTest</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HLint.html#hlintTest"><span class="hs-identifier hs-var">hlintTest</span></a><span> </span><a href="#local-6989586621679312284"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-68"></a><span>
</span><a name="line-69"></a><span class="hs-identifier">hlintHSE</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-70"></a><a name="hlintHSE"><a href="HLint.html#hlintHSE"><span class="hs-identifier">hlintHSE</span></a></a><span> </span><a name="local-6989586621679312287"><a href="#local-6989586621679312287"><span class="hs-identifier">c</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdHSE"><span class="hs-identifier hs-var">CmdHSE</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-71"></a><span>    </span><a name="local-6989586621679312290"><a href="#local-6989586621679312290"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">getVerbosity</span><span>
</span><a name="line-72"></a><span>    </span><span class="hs-identifier hs-var">forM_</span><span> </span><a href="#local-6989586621679312288"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679312291"><a href="#local-6989586621679312291"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-73"></a><span>        </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;Parse result of &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312291"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;:&quot;</span><span>
</span><a name="line-74"></a><span>        </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679312292"><a href="#local-6989586621679312292"><span class="hs-identifier">lang</span></a></a><span class="hs-special">,</span><a name="local-6989586621679312293"><a href="#local-6989586621679312293"><span class="hs-identifier">exts</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="CmdLine.html#cmdExtensions"><span class="hs-identifier hs-var">cmdExtensions</span></a><span> </span><a href="#local-6989586621679312287"><span class="hs-identifier hs-var">c</span></a><span>
</span><a name="line-75"></a><span>        </span><span class="hs-comment">-- We deliberately don't use HSE.All here to avoid any bugs in HLint</span><span>
</span><a name="line-76"></a><span>        </span><span class="hs-comment">-- polluting our bug reports (which is the main use of HSE)</span><span>
</span><a name="line-77"></a><span>        </span><a name="local-6989586621679312294"><a href="#local-6989586621679312294"><span class="hs-identifier">res</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">parseFileWithMode</span><span> </span><span class="hs-identifier hs-var">defaultParseMode</span><span class="hs-special">{</span><span class="hs-identifier">baseLanguage</span><span class="hs-glyph">=</span><a href="#local-6989586621679312292"><span class="hs-identifier hs-var">lang</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">extensions</span><span class="hs-glyph">=</span><a href="#local-6989586621679312293"><span class="hs-identifier hs-var">exts</span></a><span class="hs-special">}</span><span> </span><a href="#local-6989586621679312291"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-78"></a><span>        </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679312294"><span class="hs-identifier hs-var">res</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-79"></a><span>            </span><a name="local-6989586621679312295"><a href="#local-6989586621679312295"><span class="hs-identifier">x</span></a></a><span class="hs-glyph">@</span><span class="hs-identifier hs-var">ParseFailed</span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">print</span><span> </span><a href="#local-6989586621679312295"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-80"></a><span>            </span><span class="hs-identifier hs-var">ParseOk</span><span> </span><a name="local-6989586621679312296"><a href="#local-6989586621679312296"><span class="hs-identifier">m</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679312290"><span class="hs-identifier hs-var">v</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-81"></a><span>                </span><span class="hs-identifier hs-var">Loud</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">print</span><span> </span><a href="#local-6989586621679312296"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-82"></a><span>                </span><span class="hs-identifier hs-var">Quiet</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">print</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">prettyPrint</span><span> </span><a href="#local-6989586621679312296"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-83"></a><span>                </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">print</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">void</span><span> </span><a href="#local-6989586621679312296"><span class="hs-identifier hs-var">m</span></a><span>
</span><a name="line-84"></a><span>        </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-string">&quot;&quot;</span><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span class="hs-identifier">hlintTest</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-87"></a><a name="hlintTest"><a href="HLint.html#hlintTest"><span class="hs-identifier">hlintTest</span></a></a><span> </span><a name="local-6989586621679312297"><a href="#local-6989586621679312297"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdTest"><span class="hs-identifier hs-var">CmdTest</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-88"></a><span>    </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312298"><span class="hs-identifier hs-var">cmdProof</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-89"></a><span>        </span><a name="local-6989586621679312306"><a href="#local-6989586621679312306"><span class="hs-identifier">files</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="CmdLine.html#cmdHintFiles"><span class="hs-identifier hs-var">cmdHintFiles</span></a><span> </span><a href="#local-6989586621679312297"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-90"></a><span>        </span><a name="local-6989586621679312307"><a href="#local-6989586621679312307"><span class="hs-identifier">s</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Config.Read.html#readFilesConfig"><span class="hs-identifier hs-var">readFilesConfig</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312306"><span class="hs-identifier hs-var">files</span></a><span>
</span><a name="line-91"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312308"><a href="#local-6989586621679312308"><span class="hs-identifier">reps</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312301"><span class="hs-identifier hs-var">cmdReports</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;report.html&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;report.txt&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><a href="#local-6989586621679312301"><span class="hs-identifier hs-var">cmdReports</span></a><span>
</span><a name="line-92"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><span class="hs-special">(</span><a href="Test.Proof.html#proof"><span class="hs-identifier hs-var">proof</span></a><span> </span><a href="#local-6989586621679312308"><span class="hs-identifier hs-var">reps</span></a><span> </span><a href="#local-6989586621679312307"><span class="hs-identifier hs-var">s</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312298"><span class="hs-identifier hs-var">cmdProof</span></a><span>
</span><a name="line-93"></a><span>     </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-94"></a><span>        </span><a name="local-6989586621679312311"><a href="#local-6989586621679312311"><span class="hs-identifier">failed</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Test.All.html#test"><span class="hs-identifier hs-var">test</span></a><span> </span><a href="#local-6989586621679312297"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679312309"><a href="#local-6989586621679312309"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679312310"><a href="#local-6989586621679312310"><span class="hs-identifier">errs</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="HLint.html#hlint"><span class="hs-identifier hs-var">hlint</span></a><span> </span><a href="#local-6989586621679312309"><span class="hs-identifier hs-var">args</span></a><span class="hs-special">;</span><span> </span><span class="hs-identifier hs-var">unless</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312310"><span class="hs-identifier hs-var">errs</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">exitWith</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">ExitFailure</span><span> </span><span class="hs-number">1</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312300"><span class="hs-identifier hs-var">cmdDataDir</span></a><span> </span><a href="#local-6989586621679312299"><span class="hs-identifier hs-var">cmdGivenHints</span></a><span>
</span><a name="line-95"></a><span>        </span><span class="hs-identifier hs-var">when</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679312311"><span class="hs-identifier hs-var">failed</span></a><span> </span><span class="hs-operator hs-var">&gt;</span><span> </span><span class="hs-number">0</span><span class="hs-special">)</span><span> </span><span class="hs-identifier hs-var">exitFailure</span><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-identifier">cmdParseFlags</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="HSE.All.html#ParseFlags"><span class="hs-identifier hs-type">ParseFlags</span></a><span>
</span><a name="line-98"></a><a name="cmdParseFlags"><a href="HLint.html#cmdParseFlags"><span class="hs-identifier">cmdParseFlags</span></a></a><span> </span><a name="local-6989586621679312312"><a href="#local-6989586621679312312"><span class="hs-identifier">cmd</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HSE.All.html#parseFlagsSetLanguage"><span class="hs-identifier hs-var">parseFlagsSetLanguage</span></a><span> </span><span class="hs-special">(</span><a href="CmdLine.html#cmdExtensions"><span class="hs-identifier hs-var">cmdExtensions</span></a><span> </span><a href="#local-6989586621679312312"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="HSE.All.html#defaultParseFlags"><span class="hs-identifier hs-var">defaultParseFlags</span></a><span class="hs-special">{</span><span class="hs-identifier">cppFlags</span><span class="hs-glyph">=</span><a href="CmdLine.html#cmdCpp"><span class="hs-identifier hs-var">cmdCpp</span></a><span> </span><a href="#local-6989586621679312312"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">}</span><span>
</span><a name="line-99"></a><span>
</span><a name="line-100"></a><span class="hs-identifier">hlintGrep</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-101"></a><a name="hlintGrep"><a href="HLint.html#hlintGrep"><span class="hs-identifier">hlintGrep</span></a></a><span> </span><a name="local-6989586621679312313"><a href="#local-6989586621679312313"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdGrep"><span class="hs-identifier hs-var">CmdGrep</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-102"></a><span>    </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312314"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><span class="hs-keyword">then</span><span>
</span><a name="line-103"></a><span>        </span><a href="CmdLine.html#exitWithHelp"><span class="hs-identifier hs-var">exitWithHelp</span></a><span>
</span><a name="line-104"></a><span>     </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-105"></a><span>        </span><a name="local-6989586621679312324"><a href="#local-6989586621679312324"><span class="hs-identifier">files</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">concatMapM</span><span> </span><span class="hs-special">(</span><a href="CmdLine.html#resolveFile"><span class="hs-identifier hs-var">resolveFile</span></a><span> </span><a href="#local-6989586621679312313"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312314"><span class="hs-identifier hs-var">cmdFiles</span></a><span>
</span><a name="line-106"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312324"><span class="hs-identifier hs-var">files</span></a><span> </span><span class="hs-keyword">then</span><span>
</span><a name="line-107"></a><span>            </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;No files found&quot;</span><span>
</span><a name="line-108"></a><span>         </span><span class="hs-keyword">else</span><span>
</span><a name="line-109"></a><span>            </span><a href="Grep.html#runGrep"><span class="hs-identifier hs-var">runGrep</span></a><span> </span><a href="#local-6989586621679312315"><span class="hs-identifier hs-var">cmdPattern</span></a><span> </span><span class="hs-special">(</span><a href="HLint.html#cmdParseFlags"><span class="hs-identifier hs-var">cmdParseFlags</span></a><span> </span><a href="#local-6989586621679312313"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312324"><span class="hs-identifier hs-var">files</span></a><span>
</span><a name="line-110"></a><span>
</span><a name="line-111"></a><span class="hs-identifier">withVerbosity</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Verbosity</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679312282"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679312282"><span class="hs-identifier hs-type">a</span></a><span>
</span><a name="line-112"></a><a name="withVerbosity"><a href="HLint.html#withVerbosity"><span class="hs-identifier">withVerbosity</span></a></a><span> </span><a name="local-6989586621679312325"><a href="#local-6989586621679312325"><span class="hs-identifier">new</span></a></a><span> </span><a name="local-6989586621679312326"><a href="#local-6989586621679312326"><span class="hs-identifier">act</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-113"></a><span>    </span><a name="local-6989586621679312327"><a href="#local-6989586621679312327"><span class="hs-identifier">old</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">getVerbosity</span><span>
</span><a name="line-114"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier hs-var">setVerbosity</span><span> </span><a href="#local-6989586621679312325"><span class="hs-identifier hs-var">new</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><a href="#local-6989586621679312326"><span class="hs-identifier hs-var">act</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">finally</span><span class="hs-special">`</span><span> </span><span class="hs-identifier hs-var">setVerbosity</span><span> </span><a href="#local-6989586621679312327"><span class="hs-identifier hs-var">old</span></a><span>
</span><a name="line-115"></a><span>
</span><a name="line-116"></a><span class="hs-identifier">hlintMain</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-117"></a><a name="hlintMain"><a href="HLint.html#hlintMain"><span class="hs-identifier">hlintMain</span></a></a><span> </span><a name="local-6989586621679312328"><a href="#local-6989586621679312328"><span class="hs-identifier">args</span></a></a><span> </span><a name="local-6989586621679312329"><a href="#local-6989586621679312329"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span>
</span><a name="line-118"></a><span>    </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679312345"><span class="hs-identifier hs-var">cmdDefault</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-119"></a><span>        </span><a name="local-6989586621679312362"><a href="#local-6989586621679312362"><span class="hs-identifier">ideas</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312330"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><a href="HLint.html#withVerbosity"><span class="hs-identifier hs-var">withVerbosity</span></a><span> </span><span class="hs-identifier hs-var">Quiet</span><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-120"></a><span>            </span><a href="HLint.html#runHlintMain"><span class="hs-identifier hs-var">runHlintMain</span></a><span> </span><a href="#local-6989586621679312328"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621679312329"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">{</span><span class="hs-identifier">cmdJson</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">False</span><span class="hs-special">,</span><span class="hs-identifier">cmdSerialise</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">False</span><span class="hs-special">,</span><span class="hs-identifier">cmdRefactor</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">False</span><span class="hs-special">}</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-121"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312363"><a href="#local-6989586621679312363"><span class="hs-identifier">bad</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">nubOrd</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier">ideaHint</span><span> </span><a href="#local-6989586621679312362"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-122"></a><span>        </span><a name="local-6989586621679312364"><a href="#local-6989586621679312364"><span class="hs-identifier">src</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">readFile</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679312344"><span class="hs-identifier hs-var">cmdDataDir</span></a><span> </span><span class="hs-operator hs-var">&lt;/&gt;</span><span> </span><span class="hs-string">&quot;default.yaml&quot;</span><span>
</span><a name="line-123"></a><span>        </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312363"><span class="hs-identifier hs-var">bad</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">putStr</span><span> </span><a href="#local-6989586621679312364"><span class="hs-identifier hs-var">src</span></a><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-124"></a><span>            </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312365"><a href="#local-6989586621679312365"><span class="hs-identifier">group1</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679312366"><a href="#local-6989586621679312366"><span class="hs-identifier">groups</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">splitOn</span><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;&quot;</span><span class="hs-special">,</span><span class="hs-string">&quot;&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">lines</span><span> </span><a href="#local-6989586621679312364"><span class="hs-identifier hs-var">src</span></a><span>
</span><a name="line-125"></a><span>            </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312367"><a href="#local-6989586621679312367"><span class="hs-identifier">group2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;# Warnings currently triggered by your code&quot;</span><span> </span><span class="hs-glyph">:</span><span>
</span><a name="line-126"></a><span>                         </span><span class="hs-special">[</span><span class="hs-string">&quot;- ignore: {name: &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679312368"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;}&quot;</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679312368"><a href="#local-6989586621679312368"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312363"><span class="hs-identifier hs-var">bad</span></a><span class="hs-special">]</span><span>
</span><a name="line-127"></a><span>            </span><span class="hs-identifier hs-var">putStr</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">unlines</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">intercalate</span><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;&quot;</span><span class="hs-special">,</span><span class="hs-string">&quot;&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679312365"><span class="hs-identifier hs-var">group1</span></a><span class="hs-glyph">:</span><a href="#local-6989586621679312367"><span class="hs-identifier hs-var">group2</span></a><span class="hs-glyph">:</span><a href="#local-6989586621679312366"><span class="hs-identifier hs-var">groups</span></a><span>
</span><a name="line-128"></a><span>        </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-129"></a><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312330"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312343"><span class="hs-identifier hs-var">cmdFindHints</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-130"></a><span>        </span><a name="local-6989586621679312369"><a href="#local-6989586621679312369"><span class="hs-identifier">hints</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">concatMapM</span><span> </span><span class="hs-special">(</span><a href="CmdLine.html#resolveFile"><span class="hs-identifier hs-var">resolveFile</span></a><span> </span><a href="#local-6989586621679312329"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312343"><span class="hs-identifier hs-var">cmdFindHints</span></a><span>
</span><a name="line-131"></a><span>        </span><span class="hs-identifier hs-var">mapM_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fst</span><span> </span><span class="hs-operator hs-var">&lt;=&lt;</span><span> </span><a href="Config.Compute.html#computeSettings"><span class="hs-identifier hs-var">computeSettings</span></a><span> </span><span class="hs-special">(</span><a href="HLint.html#cmdParseFlags"><span class="hs-identifier hs-var">cmdParseFlags</span></a><span> </span><a href="#local-6989586621679312329"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312369"><span class="hs-identifier hs-var">hints</span></a><span> </span><span class="hs-operator hs-var">&gt;&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-132"></a><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312330"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-133"></a><span>        </span><a href="CmdLine.html#exitWithHelp"><span class="hs-identifier hs-var">exitWithHelp</span></a><span>
</span><a name="line-134"></a><span>    </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679312359"><span class="hs-identifier hs-var">cmdRefactor</span></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-135"></a><span>        </span><span class="hs-identifier hs-var">withTempFile</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="HLint.html#runHlintMain"><span class="hs-identifier hs-var">runHlintMain</span></a><span> </span><a href="#local-6989586621679312328"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621679312329"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">Just</span><span>
</span><a name="line-136"></a><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-137"></a><span>        </span><a href="HLint.html#runHlintMain"><span class="hs-identifier hs-var">runHlintMain</span></a><span> </span><a href="#local-6989586621679312328"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621679312329"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-138"></a><span>
</span><a name="line-139"></a><span class="hs-identifier">runHlintMain</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-140"></a><a name="runHlintMain"><a href="HLint.html#runHlintMain"><span class="hs-identifier">runHlintMain</span></a></a><span> </span><a name="local-6989586621679312370"><a href="#local-6989586621679312370"><span class="hs-identifier">args</span></a></a><span> </span><a name="local-6989586621679312371"><a href="#local-6989586621679312371"><span class="hs-identifier">cmd</span></a></a><span> </span><a name="local-6989586621679312372"><a href="#local-6989586621679312372"><span class="hs-identifier">tmpFile</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-141"></a><span>    </span><span class="hs-special">(</span><a name="local-6989586621679312373"><a href="#local-6989586621679312373"><span class="hs-identifier">cmd</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679312374"><a href="#local-6989586621679312374"><span class="hs-identifier">settings</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="HLint.html#readAllSettings"><span class="hs-identifier hs-var">readAllSettings</span></a><span> </span><a href="#local-6989586621679312370"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621679312371"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-142"></a><span>    </span><a href="HLint.html#runHints"><span class="hs-identifier hs-var">runHints</span></a><span> </span><a href="#local-6989586621679312370"><span class="hs-identifier hs-var">args</span></a><span> </span><a href="#local-6989586621679312374"><span class="hs-identifier hs-var">settings</span></a><span> </span><span class="hs-operator hs-var">=&lt;&lt;</span><span> </span><a href="HLint.html#resolveFiles"><span class="hs-identifier hs-var">resolveFiles</span></a><span> </span><a href="#local-6989586621679312373"><span class="hs-identifier hs-var">cmd</span></a><span> </span><a href="#local-6989586621679312372"><span class="hs-identifier hs-var">tmpFile</span></a><span>
</span><a name="line-143"></a><span>
</span><a name="line-144"></a><span class="hs-identifier">resolveFiles</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span>
</span><a name="line-145"></a><a name="resolveFiles"><a href="HLint.html#resolveFiles"><span class="hs-identifier">resolveFiles</span></a></a><span> </span><a name="local-6989586621679312375"><a href="#local-6989586621679312375"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><a name="local-6989586621679312408"><a href="#local-6989586621679312408"><span class="hs-identifier">tmpFile</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-146"></a><span>    </span><a name="local-6989586621679312409"><a href="#local-6989586621679312409"><span class="hs-identifier">files</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">concatMapM</span><span> </span><span class="hs-special">(</span><a href="CmdLine.html#resolveFile"><span class="hs-identifier hs-var">resolveFile</span></a><span> </span><a href="#local-6989586621679312375"><span class="hs-identifier hs-var">cmd</span></a><span> </span><a href="#local-6989586621679312408"><span class="hs-identifier hs-var">tmpFile</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312376"><span class="hs-identifier hs-var">cmdFiles</span></a><span>
</span><a name="line-147"></a><span>    </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312409"><span class="hs-identifier hs-var">files</span></a><span>
</span><a name="line-148"></a><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;No files found&quot;</span><span>
</span><a name="line-149"></a><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679312375"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-special">{</span><span> </span><span class="hs-identifier">cmdFiles</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679312409"><span class="hs-identifier hs-var">files</span></a><span> </span><span class="hs-special">}</span><span>
</span><a name="line-150"></a><span class="hs-identifier">resolveFiles</span><span> </span><a name="local-6989586621679312410"><a href="#local-6989586621679312410"><span class="hs-identifier">cmd</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><a href="#local-6989586621679312410"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-151"></a><span>
</span><a name="line-152"></a><span class="hs-identifier">readAllSettings</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><a href="Config.Type.html#Setting"><span class="hs-identifier hs-type">Setting</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-153"></a><a name="readAllSettings"><a href="HLint.html#readAllSettings"><span class="hs-identifier">readAllSettings</span></a></a><span> </span><a name="local-6989586621679312411"><a href="#local-6989586621679312411"><span class="hs-identifier">args1</span></a></a><span> </span><a name="local-6989586621679312412"><a href="#local-6989586621679312412"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-154"></a><span>    </span><a name="local-6989586621679312447"><a href="#local-6989586621679312447"><span class="hs-identifier">files</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="CmdLine.html#cmdHintFiles"><span class="hs-identifier hs-var">cmdHintFiles</span></a><span> </span><a href="#local-6989586621679312412"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-155"></a><span>    </span><a name="local-6989586621679312450"><a href="#local-6989586621679312450"><span class="hs-identifier">settings1</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><a name="line-156"></a><span>        </span><a href="Config.Read.html#readFilesConfig"><span class="hs-identifier hs-var">readFilesConfig</span></a><span> </span><span class="hs-operator hs-var">$</span><span>
</span><a name="line-157"></a><span>        </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312447"><span class="hs-identifier hs-var">files</span></a><span>
</span><a name="line-158"></a><span>        </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-string">&quot;CommandLine.hs&quot;</span><span class="hs-special">,</span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679312448"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679312448"><a href="#local-6989586621679312448"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312416"><span class="hs-identifier hs-var">cmdWithHints</span></a><span class="hs-special">]</span><span>
</span><a name="line-159"></a><span>        </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-string">&quot;CommandLine.yaml&quot;</span><span class="hs-special">,</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679312445"><span class="hs-identifier hs-var">enableGroup</span></a><span> </span><a href="#local-6989586621679312449"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679312449"><a href="#local-6989586621679312449"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312417"><span class="hs-identifier hs-var">cmdWithGroups</span></a><span class="hs-special">]</span><span>
</span><a name="line-160"></a><span>    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312451"><a href="#local-6989586621679312451"><span class="hs-identifier">args2</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679312452"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="Config.Type.html#SettingArgument"><span class="hs-identifier hs-var">SettingArgument</span></a><span> </span><a name="local-6989586621679312452"><a href="#local-6989586621679312452"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312450"><span class="hs-identifier hs-var">settings1</span></a><span class="hs-special">]</span><span>
</span><a name="line-161"></a><span>    </span><a name="local-6989586621679312453"><a href="#local-6989586621679312453"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312451"><span class="hs-identifier hs-var">args2</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679312412"><span class="hs-identifier hs-var">cmd</span></a><span> </span><span class="hs-keyword">else</span><span> </span><a href="CmdLine.html#getCmd"><span class="hs-identifier hs-var">getCmd</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679312451"><span class="hs-identifier hs-var">args2</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312411"><span class="hs-identifier hs-var">args1</span></a><span> </span><span class="hs-comment">-- command line arguments are passed last</span><span>
</span><a name="line-162"></a><span>    </span><a name="local-6989586621679312486"><a href="#local-6989586621679312486"><span class="hs-identifier">settings2</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">concatMapM</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">fmap</span><span> </span><span class="hs-identifier hs-var">snd</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Config.Compute.html#computeSettings"><span class="hs-identifier hs-var">computeSettings</span></a><span> </span><span class="hs-special">(</span><a href="HLint.html#cmdParseFlags"><span class="hs-identifier hs-var">cmdParseFlags</span></a><span> </span><a href="#local-6989586621679312453"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312467"><span class="hs-identifier hs-var">cmdFindHints</span></a><span>
</span><a name="line-163"></a><span>    </span><a name="local-6989586621679312488"><a href="#local-6989586621679312488"><span class="hs-identifier">settings3</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">[</span><a href="Config.Type.html#SettingClassify"><span class="hs-identifier hs-var">SettingClassify</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Config.Type.html#Classify"><span class="hs-identifier hs-var">Classify</span></a><span> </span><a href="Config.Type.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a><span> </span><a href="#local-6989586621679312487"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679312487"><a href="#local-6989586621679312487"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312462"><span class="hs-identifier hs-var">cmdIgnore</span></a><span class="hs-special">]</span><span>
</span><a name="line-164"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679312453"><span class="hs-identifier hs-var">cmd</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679312450"><span class="hs-identifier hs-var">settings1</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312486"><span class="hs-identifier hs-var">settings2</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312488"><span class="hs-identifier hs-var">settings3</span></a><span class="hs-special">)</span><span>
</span><a name="line-165"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-166"></a><span>        </span><a name="local-6989586621679312445"><a href="#local-6989586621679312445"><span class="hs-identifier">enableGroup</span></a></a><span> </span><a name="local-6989586621679312446"><a href="#local-6989586621679312446"><span class="hs-identifier">groupName</span></a></a><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-167"></a><span>            </span><span class="hs-identifier hs-var">unlines</span><span>
</span><a name="line-168"></a><span>            </span><span class="hs-special">[</span><span class="hs-string">&quot;- group:&quot;</span><span>
</span><a name="line-169"></a><span>            </span><span class="hs-special">,</span><span class="hs-string">&quot;    name: &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312446"><span class="hs-identifier hs-var">groupName</span></a><span>
</span><a name="line-170"></a><span>            </span><span class="hs-special">,</span><span class="hs-string">&quot;    enabled: true&quot;</span><span>
</span><a name="line-171"></a><span>            </span><span class="hs-special">]</span><span>
</span><a name="line-172"></a><span>
</span><a name="line-173"></a><span class="hs-identifier">runHints</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Config.Type.html#Setting"><span class="hs-identifier hs-type">Setting</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-174"></a><a name="runHints"><a href="HLint.html#runHints"><span class="hs-identifier">runHints</span></a></a><span> </span><a name="local-6989586621679312489"><a href="#local-6989586621679312489"><span class="hs-identifier">args</span></a></a><span> </span><a name="local-6989586621679312490"><a href="#local-6989586621679312490"><span class="hs-identifier">settings</span></a></a><span> </span><a name="local-6989586621679312491"><a href="#local-6989586621679312491"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-175"></a><span>    </span><a name="local-6989586621679312524"><a href="#local-6989586621679312524"><span class="hs-identifier">j</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312499"><span class="hs-identifier hs-var">cmdThreads</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">getNumProcessors</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679312499"><span class="hs-identifier hs-var">cmdThreads</span></a><span>
</span><a name="line-176"></a><span>    </span><span class="hs-identifier hs-var">withNumCapabilities</span><span> </span><a href="#local-6989586621679312524"><span class="hs-identifier hs-var">j</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-177"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312525"><a href="#local-6989586621679312525"><span class="hs-identifier">outStrLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">whenNormal</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">putStrLn</span><span>
</span><a name="line-178"></a><span>        </span><a name="local-6989586621679312526"><a href="#local-6989586621679312526"><span class="hs-identifier">ideas</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="HLint.html#getIdeas"><span class="hs-identifier hs-var">getIdeas</span></a><span> </span><a href="#local-6989586621679312491"><span class="hs-identifier hs-var">cmd</span></a><span> </span><a href="#local-6989586621679312490"><span class="hs-identifier hs-var">settings</span></a><span>
</span><a name="line-179"></a><span>        </span><a name="local-6989586621679312528"><a href="#local-6989586621679312528"><span class="hs-identifier">ideas</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312501"><span class="hs-identifier hs-var">cmdShowAll</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="#local-6989586621679312526"><span class="hs-identifier hs-var">ideas</span></a><span> </span><span class="hs-keyword">else</span><span>  </span><span class="hs-identifier hs-var">filter</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679312527"><a href="#local-6989586621679312527"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier">ideaSeverity</span><span> </span><a href="#local-6989586621679312527"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-operator hs-var">/=</span><span> </span><a href="Config.Type.html#Ignore"><span class="hs-identifier hs-var">Ignore</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312526"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-180"></a><span>        </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312514"><span class="hs-identifier hs-var">cmdJson</span></a><span> </span><span class="hs-keyword">then</span><span>
</span><a name="line-181"></a><span>            </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Idea.html#showIdeasJson"><span class="hs-identifier hs-var">showIdeasJson</span></a><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-182"></a><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312515"><span class="hs-identifier hs-var">cmdCC</span></a><span> </span><span class="hs-keyword">then</span><span>
</span><a name="line-183"></a><span>            </span><span class="hs-identifier hs-var">mapM_</span><span> </span><span class="hs-special">(</span><a href="CC.html#printIssue"><span class="hs-identifier hs-var">printIssue</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="CC.html#fromIdea"><span class="hs-identifier hs-var">fromIdea</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-184"></a><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312520"><span class="hs-identifier hs-var">cmdSerialise</span></a><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-185"></a><span>            </span><span class="hs-identifier hs-var">hSetBuffering</span><span> </span><span class="hs-identifier hs-var">stdout</span><span> </span><span class="hs-identifier hs-var">NoBuffering</span><span>
</span><a name="line-186"></a><span>            </span><span class="hs-identifier hs-var">print</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">&amp;&amp;&amp;</span><span> </span><span class="hs-identifier">ideaRefactoring</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-187"></a><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312521"><span class="hs-identifier hs-var">cmdRefactor</span></a><span> </span><span class="hs-keyword">then</span><span>
</span><a name="line-188"></a><span>            </span><a href="HLint.html#handleRefactoring"><span class="hs-identifier hs-var">handleRefactoring</span></a><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span> </span><a href="#local-6989586621679312492"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><a href="#local-6989586621679312491"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-189"></a><span>         </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-190"></a><span>            </span><a name="local-6989586621679312529"><a href="#local-6989586621679312529"><span class="hs-identifier">usecolour</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="CmdLine.html#cmdUseColour"><span class="hs-identifier hs-var">cmdUseColour</span></a><span> </span><a href="#local-6989586621679312491"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-191"></a><span>            </span><a name="local-6989586621679312530"><a href="#local-6989586621679312530"><span class="hs-identifier">showItem</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312529"><span class="hs-identifier hs-var">usecolour</span></a><span> </span><span class="hs-keyword">then</span><span> </span><a href="Idea.html#showANSI"><span class="hs-identifier hs-var">showANSI</span></a><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-identifier hs-var">show</span><span>
</span><a name="line-192"></a><span>            </span><span class="hs-identifier hs-var">mapM_</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679312525"><span class="hs-identifier hs-var">outStrLn</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679312530"><span class="hs-identifier hs-var">showItem</span></a><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-193"></a><span>            </span><a href="HLint.html#handleReporting"><span class="hs-identifier hs-var">handleReporting</span></a><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span> </span><a href="#local-6989586621679312491"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-194"></a><span>        </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679312528"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-195"></a><span>
</span><a name="line-196"></a><span class="hs-identifier">getIdeas</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Config.Type.html#Setting"><span class="hs-identifier hs-type">Setting</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-197"></a><a name="getIdeas"><a href="HLint.html#getIdeas"><span class="hs-identifier">getIdeas</span></a></a><span> </span><a name="local-6989586621679312531"><a href="#local-6989586621679312531"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><a name="local-6989586621679312564"><a href="#local-6989586621679312564"><span class="hs-identifier">settings</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-198"></a><span>    </span><a name="local-6989586621679312565"><a href="#local-6989586621679312565"><span class="hs-identifier">settings</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679312564"><span class="hs-identifier hs-var">settings</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><a href="Config.Type.html#Builtin"><span class="hs-identifier hs-var">Builtin</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">fst</span><span class="hs-special">)</span><span> </span><a href="Hint.All.html#builtinHints"><span class="hs-identifier hs-var">builtinHints</span></a><span>
</span><a name="line-199"></a><span>    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312566"><a href="#local-6989586621679312566"><span class="hs-identifier">flags</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="HLint.html#cmdParseFlags"><span class="hs-identifier hs-var">cmdParseFlags</span></a><span> </span><a href="#local-6989586621679312531"><span class="hs-identifier hs-var">cmd</span></a><span>
</span><a name="line-200"></a><span>    </span><a name="local-6989586621679312568"><a href="#local-6989586621679312568"><span class="hs-identifier">ideas</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312544"><span class="hs-identifier hs-var">cmdCross</span></a><span>
</span><a name="line-201"></a><span>        </span><span class="hs-keyword">then</span><span> </span><a href="Apply.html#applyHintFiles"><span class="hs-identifier hs-var">applyHintFiles</span></a><span> </span><a href="#local-6989586621679312566"><span class="hs-identifier hs-var">flags</span></a><span> </span><a href="#local-6989586621679312565"><span class="hs-identifier hs-var">settings</span></a><span> </span><a href="#local-6989586621679312532"><span class="hs-identifier hs-var">cmdFiles</span></a><span>
</span><a name="line-202"></a><span>        </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">concat</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Parallel.html#parallel"><span class="hs-identifier hs-var">parallel</span></a><span> </span><a href="#local-6989586621679312539"><span class="hs-identifier hs-var">cmdThreads</span></a><span> </span><span class="hs-special">[</span><a href="HLint.html#evaluateList"><span class="hs-identifier hs-var">evaluateList</span></a><span> </span><span class="hs-operator hs-var">=&lt;&lt;</span><span> </span><a href="Apply.html#applyHintFile"><span class="hs-identifier hs-var">applyHintFile</span></a><span> </span><a href="#local-6989586621679312566"><span class="hs-identifier hs-var">flags</span></a><span> </span><a href="#local-6989586621679312565"><span class="hs-identifier hs-var">settings</span></a><span> </span><a href="#local-6989586621679312567"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679312567"><a href="#local-6989586621679312567"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312532"><span class="hs-identifier hs-var">cmdFiles</span></a><span class="hs-special">]</span><span>
</span><a name="line-203"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">null</span><span> </span><a href="#local-6989586621679312557"><span class="hs-identifier hs-var">cmdOnly</span></a><span class="hs-special">)</span><span>
</span><a name="line-204"></a><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679312569"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679312569"><a href="#local-6989586621679312569"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="#local-6989586621679312568"><span class="hs-identifier hs-var">ideas</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">ideaHint</span><span> </span><a href="#local-6989586621679312569"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">elem</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621679312557"><span class="hs-identifier hs-var">cmdOnly</span></a><span class="hs-special">]</span><span>
</span><a name="line-205"></a><span>        </span><span class="hs-keyword">else</span><span> </span><a href="#local-6989586621679312568"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span class="hs-identifier">handleRefactoring</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-208"></a><a name="handleRefactoring"><a href="HLint.html#handleRefactoring"><span class="hs-identifier">handleRefactoring</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">pure</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- No refactorings to apply</span><span>
</span><a name="line-209"></a><span class="hs-identifier">handleRefactoring</span><span> </span><a name="local-6989586621679312570"><a href="#local-6989586621679312570"><span class="hs-identifier">ideas</span></a></a><span> </span><a name="local-6989586621679312571"><a href="#local-6989586621679312571"><span class="hs-identifier">files</span></a></a><span> </span><a name="local-6989586621679312572"><a href="#local-6989586621679312572"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-210"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679312573"><span class="hs-identifier hs-var">cmdFiles</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-211"></a><span>        </span><span class="hs-special">[</span><a name="local-6989586621679312605"><a href="#local-6989586621679312605"><span class="hs-identifier">file</span></a></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-212"></a><span>            </span><span class="hs-comment">-- Ensure that we can find the executable</span><span>
</span><a name="line-213"></a><span>            </span><a name="local-6989586621679312606"><a href="#local-6989586621679312606"><span class="hs-identifier">path</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="HLint.html#checkRefactor"><span class="hs-identifier hs-var">checkRefactor</span></a><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312604"><span class="hs-identifier hs-var">cmdWithRefactor</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-string">&quot;&quot;</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a href="#local-6989586621679312604"><span class="hs-identifier hs-var">cmdWithRefactor</span></a><span class="hs-special">)</span><span>
</span><a name="line-214"></a><span>            </span><span class="hs-comment">-- writeFile &quot;hlint.refact&quot;</span><span>
</span><a name="line-215"></a><span>            </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312607"><a href="#local-6989586621679312607"><span class="hs-identifier">hints</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">&amp;&amp;&amp;</span><span> </span><span class="hs-identifier">ideaRefactoring</span><span class="hs-special">)</span><span> </span><a href="#local-6989586621679312570"><span class="hs-identifier hs-var">ideas</span></a><span>
</span><a name="line-216"></a><span>            </span><span class="hs-identifier hs-var">withTempFile</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679312608"><a href="#local-6989586621679312608"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-217"></a><span>                </span><span class="hs-identifier hs-var">writeFile</span><span> </span><a href="#local-6989586621679312608"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679312607"><span class="hs-identifier hs-var">hints</span></a><span>
</span><a name="line-218"></a><span>                </span><span class="hs-identifier hs-var">exitWith</span><span> </span><span class="hs-operator hs-var">=&lt;&lt;</span><span> </span><a href="HLint.html#runRefactoring"><span class="hs-identifier hs-var">runRefactoring</span></a><span> </span><a href="#local-6989586621679312606"><span class="hs-identifier hs-var">path</span></a><span> </span><a href="#local-6989586621679312605"><span class="hs-identifier hs-var">file</span></a><span> </span><a href="#local-6989586621679312608"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679312603"><span class="hs-identifier hs-var">cmdRefactorOptions</span></a><span>
</span><a name="line-219"></a><span>        </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;Refactor flag can only be used with an individual file&quot;</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span>
</span><a name="line-222"></a><span class="hs-identifier">handleReporting</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="CmdLine.html#Cmd"><span class="hs-identifier hs-type">Cmd</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-223"></a><a name="handleReporting"><a href="HLint.html#handleReporting"><span class="hs-identifier">handleReporting</span></a></a><span> </span><a name="local-6989586621679312609"><a href="#local-6989586621679312609"><span class="hs-identifier">showideas</span></a></a><span> </span><a name="local-6989586621679312610"><a href="#local-6989586621679312610"><span class="hs-identifier">cmd</span></a></a><span class="hs-glyph">@</span><a href="CmdLine.html#CmdMain"><span class="hs-identifier hs-var">CmdMain</span></a><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-224"></a><span>    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312643"><a href="#local-6989586621679312643"><span class="hs-identifier">outStrLn</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">whenNormal</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">putStrLn</span><span>
</span><a name="line-225"></a><span>    </span><span class="hs-identifier hs-var">forM_</span><span> </span><a href="#local-6989586621679312612"><span class="hs-identifier hs-var">cmdReports</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679312644"><a href="#local-6989586621679312644"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-226"></a><span>        </span><a href="#local-6989586621679312643"><span class="hs-identifier hs-var">outStrLn</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-string">&quot;Writing report to &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312644"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot; ...&quot;</span><span>
</span><a name="line-227"></a><span>        </span><a href="Report.html#writeReport"><span class="hs-identifier hs-var">writeReport</span></a><span> </span><a href="#local-6989586621679312625"><span class="hs-identifier hs-var">cmdDataDir</span></a><span> </span><a href="#local-6989586621679312644"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679312609"><span class="hs-identifier hs-var">showideas</span></a><span>
</span><a name="line-228"></a><span>    </span><span class="hs-identifier hs-var">unless</span><span> </span><a href="#local-6989586621679312635"><span class="hs-identifier hs-var">cmdNoSummary</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-229"></a><span>        </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312645"><a href="#local-6989586621679312645"><span class="hs-identifier">n</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679312609"><span class="hs-identifier hs-var">showideas</span></a><span>
</span><a name="line-230"></a><span>        </span><a href="#local-6989586621679312643"><span class="hs-identifier hs-var">outStrLn</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-keyword">if</span><span> </span><a href="#local-6989586621679312645"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-number">0</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-string">&quot;No hints&quot;</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679312645"><span class="hs-identifier hs-var">n</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot; hint&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">[</span><span class="hs-char">'s'</span><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679312645"><span class="hs-identifier hs-var">n</span></a><span class="hs-operator hs-var">/=</span><span class="hs-number">1</span><span class="hs-special">]</span><span>
</span><a name="line-231"></a><span>
</span><a name="line-232"></a><span class="hs-identifier">runRefactoring</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">String</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">ExitCode</span><span>
</span><a name="line-233"></a><a name="runRefactoring"><a href="HLint.html#runRefactoring"><span class="hs-identifier">runRefactoring</span></a></a><span> </span><a name="local-6989586621679312646"><a href="#local-6989586621679312646"><span class="hs-identifier">rpath</span></a></a><span> </span><a name="local-6989586621679312647"><a href="#local-6989586621679312647"><span class="hs-identifier">fin</span></a></a><span> </span><a name="local-6989586621679312648"><a href="#local-6989586621679312648"><span class="hs-identifier">hints</span></a></a><span> </span><a name="local-6989586621679312649"><a href="#local-6989586621679312649"><span class="hs-identifier">opts</span></a></a><span> </span><span class="hs-glyph">=</span><span>  </span><span class="hs-keyword">do</span><span>
</span><a name="line-234"></a><span>    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312650"><a href="#local-6989586621679312650"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679312647"><span class="hs-identifier hs-var">fin</span></a><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;-v0&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">words</span><span> </span><a href="#local-6989586621679312649"><span class="hs-identifier hs-var">opts</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;--refact-file&quot;</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679312648"><span class="hs-identifier hs-var">hints</span></a><span class="hs-special">]</span><span>
</span><a name="line-235"></a><span>    </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">_</span><span class="hs-special">,</span><span> </span><a name="local-6989586621679312651"><a href="#local-6989586621679312651"><span class="hs-identifier">phand</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">createProcess</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">proc</span><span> </span><a href="#local-6989586621679312646"><span class="hs-identifier hs-var">rpath</span></a><span> </span><a href="#local-6989586621679312650"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-236"></a><span>    </span><span class="hs-identifier hs-var">try</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">hSetBuffering</span><span> </span><span class="hs-identifier hs-var">stdin</span><span> </span><span class="hs-identifier hs-var">LineBuffering</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Either</span><span> </span><span class="hs-identifier hs-type">IOException</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-237"></a><span>    </span><span class="hs-identifier hs-var">hSetBuffering</span><span> </span><span class="hs-identifier hs-var">stdout</span><span> </span><span class="hs-identifier hs-var">LineBuffering</span><span>
</span><a name="line-238"></a><span>    </span><span class="hs-comment">-- Propagate the exit code from the spawn process</span><span>
</span><a name="line-239"></a><span>    </span><span class="hs-identifier hs-var">waitForProcess</span><span> </span><a href="#local-6989586621679312651"><span class="hs-identifier hs-var">phand</span></a><span>
</span><a name="line-240"></a><span>
</span><a name="line-241"></a><span class="hs-identifier">checkRefactor</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">FilePath</span><span>
</span><a name="line-242"></a><a name="checkRefactor"><a href="HLint.html#checkRefactor"><span class="hs-identifier">checkRefactor</span></a></a><span> </span><a name="local-6989586621679312652"><a href="#local-6989586621679312652"><span class="hs-identifier">rpath</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-243"></a><span>    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679312653"><a href="#local-6989586621679312653"><span class="hs-identifier">excPath</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">fromMaybe</span><span> </span><span class="hs-string">&quot;refactor&quot;</span><span> </span><a href="#local-6989586621679312652"><span class="hs-identifier hs-var">rpath</span></a><span>
</span><a name="line-244"></a><span>    </span><a name="local-6989586621679312654"><a href="#local-6989586621679312654"><span class="hs-identifier">mexc</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">findExecutable</span><span> </span><a href="#local-6989586621679312653"><span class="hs-identifier hs-var">excPath</span></a><span>
</span><a name="line-245"></a><span>    </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679312654"><span class="hs-identifier hs-var">mexc</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-246"></a><span>        </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679312655"><a href="#local-6989586621679312655"><span class="hs-identifier">exc</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span>  </span><span class="hs-keyword">do</span><span>
</span><a name="line-247"></a><span>            </span><a name="local-6989586621679312656"><a href="#local-6989586621679312656"><span class="hs-identifier">ver</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">readVersion</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">tail</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><span class="hs-identifier hs-var">readProcess</span><span> </span><a href="#local-6989586621679312655"><span class="hs-identifier hs-var">exc</span></a><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;--version&quot;</span><span class="hs-special">]</span><span> </span><span class="hs-string">&quot;&quot;</span><span>
</span><a name="line-248"></a><span>            </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier">versionBranch</span><span> </span><a href="#local-6989586621679312656"><span class="hs-identifier hs-var">ver</span></a><span> </span><span class="hs-operator hs-var">&gt;=</span><span> </span><span class="hs-special">[</span><span class="hs-number">0</span><span class="hs-special">,</span><span class="hs-number">1</span><span class="hs-special">,</span><span class="hs-number">0</span><span class="hs-special">,</span><span class="hs-number">0</span><span class="hs-special">]</span><span>
</span><a name="line-249"></a><span>                </span><span class="hs-keyword">then</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679312655"><span class="hs-identifier hs-var">exc</span></a><span>
</span><a name="line-250"></a><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;Your version of refactor is too old, please upgrade to the latest version&quot;</span><span>
</span><a name="line-251"></a><span>        </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">unlines</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-string">&quot;Could not find refactor&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;Tried with: &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679312653"><span class="hs-identifier hs-var">excPath</span></a><span> </span><span class="hs-special">]</span><span>
</span><a name="line-252"></a><span>
</span><a name="line-253"></a><span class="hs-identifier">evaluateList</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679312281"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679312281"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">]</span><span>
</span><a name="line-254"></a><a name="evaluateList"><a href="HLint.html#evaluateList"><span class="hs-identifier">evaluateList</span></a></a><span> </span><a name="local-6989586621679312657"><a href="#local-6989586621679312657"><span class="hs-identifier">xs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-255"></a><span>    </span><span class="hs-identifier hs-var">evaluate</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679312657"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-256"></a><span>    </span><span class="hs-identifier hs-var">return</span><span> </span><a href="#local-6989586621679312657"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-257"></a></pre></body></html>