<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE PatternGuards, ScopedTypeVariables, RecordWildCards #-}</span><span>
</span><a name="line-2"></a><span class="hs-comment">{-
    Reduce the number of import declarations.
    Two import declarations can be combined if:
      (note, A[] is A with whatever import list, or none)

    import A[]; import A[] = import A[]
    import A(B); import A(C) = import A(B,C)
    import A; import A(C) = import A
    import A; import A hiding (C) = import A
    import A[]; import A[] as Y = import A[] as Y

&lt;TEST&gt;
import A; import A -- import A
import A; import A; import A -- import A
import A(Foo) ; import A -- import A
import A ;import A(Foo) -- import A
import A(Bar(..)); import {-# SOURCE #-} A
import A; import B
import A(B) ; import A(C) -- import A(B,C)
import A; import A hiding (C) -- import A
import A; import A as Y -- import A as Y
import A; import qualified A as Y
import A as B; import A as C
import A as A -- import A
import qualified A as A -- import qualified A
import A; import B; import A -- import A
import qualified A; import A
import B; import A; import A -- import A
import A hiding(Foo); import A hiding(Bar)
import List -- import Data.List
import qualified List -- import qualified Data.List as List
import Char(foo) -- import Data.Char(foo)
import IO(foo)
import IO as X -- import System.IO as X; import System.IO.Error as X; import Control.Exception  as X (bracket,bracket_)
&lt;/TEST&gt;
-}</span><span>
</span><a name="line-38"></a><span>
</span><a name="line-39"></a><span>
</span><a name="line-40"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hint.Import</span><span class="hs-special">(</span><a href="Hint.Import.html#importHint"><span class="hs-identifier hs-var">importHint</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-41"></a><span>
</span><a name="line-42"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control.Applicative</span><span>
</span><a name="line-43"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Tuple.Extra</span><span>
</span><a name="line-44"></a><span class="hs-keyword">import</span><span> </span><a href="Hint.Type.html"><span class="hs-identifier">Hint.Type</span></a><span>
</span><a name="line-45"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Refact.Types</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ModuleName</span><span class="hs-special">)</span><span>
</span><a name="line-46"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Refact.Types</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">R</span><span>
</span><a name="line-47"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.List.Extra</span><span>
</span><a name="line-48"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Maybe</span><span>
</span><a name="line-49"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Prelude</span><span>
</span><a name="line-50"></a><span>
</span><a name="line-51"></a><span>
</span><a name="line-52"></a><span class="hs-identifier">importHint</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Hint.Type.html#ModuHint"><span class="hs-identifier hs-type">ModuHint</span></a><span>
</span><a name="line-53"></a><a name="importHint"><a href="Hint.Import.html#importHint"><span class="hs-identifier">importHint</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679279698"><a href="#local-6989586621679279698"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">concatMap</span><span> </span><span class="hs-special">(</span><a href="Hint.Import.html#wrap"><span class="hs-identifier hs-var">wrap</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">snd</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">groupSort</span><span>
</span><a name="line-54"></a><span>                 </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-special">(</span><a href="HSE.Match.html#fromNamed"><span class="hs-identifier hs-var">fromNamed</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">importModule</span><span> </span><a href="#local-6989586621679279699"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">,</span><span class="hs-identifier">importPkg</span><span> </span><a href="#local-6989586621679279699"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span class="hs-special">,</span><a href="#local-6989586621679279699"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679279699"><a href="#local-6989586621679279699"><span class="hs-identifier">i</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">universeBi</span><span> </span><a href="#local-6989586621679279698"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">importSrc</span><span> </span><a href="#local-6989586621679279699"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">++</span><span>
</span><a name="line-55"></a><span>                 </span><span class="hs-identifier hs-var">concatMap</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><a name="local-6989586621679279700"><a href="#local-6989586621679279700"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Hint.Import.html#hierarchy"><span class="hs-identifier hs-var">hierarchy</span></a><span> </span><a href="#local-6989586621679279700"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="Hint.Import.html#combine1"><span class="hs-identifier hs-var">combine1</span></a><span> </span><a href="#local-6989586621679279700"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">universeBi</span><span> </span><a href="#local-6989586621679279698"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-56"></a><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span class="hs-identifier">wrap</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-59"></a><a name="wrap"><a href="Hint.Import.html#wrap"><span class="hs-identifier">wrap</span></a></a><span> </span><a name="local-6989586621679279701"><a href="#local-6989586621679279701"><span class="hs-identifier">o</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span> </span><a href="Idea.html#rawIdea"><span class="hs-identifier hs-var">rawIdea</span></a><span> </span><a href="Config.Type.html#Warning"><span class="hs-identifier hs-var">Warning</span></a><span> </span><span class="hs-string">&quot;Use fewer imports&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">srcInfoSpan</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">ann</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">head</span><span> </span><a href="#local-6989586621679279701"><span class="hs-identifier hs-var">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279702"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679279701"><span class="hs-identifier hs-var">o</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679279702"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679279703"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621679279704"><span class="hs-identifier hs-var">rs</span></a><span>
</span><a name="line-60"></a><span>         </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279703"><a href="#local-6989586621679279703"><span class="hs-identifier">x</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679279704"><a href="#local-6989586621679279704"><span class="hs-identifier">rs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><a href="Hint.Import.html#simplify"><span class="hs-identifier hs-var">simplify</span></a><span> </span><a href="#local-6989586621679279701"><span class="hs-identifier hs-var">o</span></a><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><a name="line-61"></a><span>    </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679279702"><a href="#local-6989586621679279702"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unlines</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-identifier hs-var">prettyPrint</span><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-identifier">simplify</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Refactoring</span><span> </span><span class="hs-identifier hs-type">R.SrcSpan</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-65"></a><a name="simplify"><a href="Hint.Import.html#simplify"><span class="hs-identifier">simplify</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-66"></a><span class="hs-identifier">simplify</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279705"><a href="#local-6989586621679279705"><span class="hs-identifier">x</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679279706"><a href="#local-6989586621679279706"><span class="hs-identifier">xs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="Hint.Import.html#simplifyHead"><span class="hs-identifier hs-var">simplifyHead</span></a><span> </span><a href="#local-6989586621679279705"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679279706"><span class="hs-identifier hs-var">xs</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-67"></a><span>    </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">first</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279705"><span class="hs-identifier hs-var">x</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Hint.Import.html#simplify"><span class="hs-identifier hs-var">simplify</span></a><span> </span><a href="#local-6989586621679279706"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-68"></a><span>    </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279707"><a href="#local-6989586621679279707"><span class="hs-identifier">xs</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679279708"><a href="#local-6989586621679279708"><span class="hs-identifier">rs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">maybe</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279707"><span class="hs-identifier hs-var">xs</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279708"><span class="hs-identifier hs-var">rs</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">second</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679279708"><span class="hs-identifier hs-var">rs</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Hint.Import.html#simplify"><span class="hs-identifier hs-var">simplify</span></a><span> </span><a href="#local-6989586621679279707"><span class="hs-identifier hs-var">xs</span></a><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-identifier">simplifyHead</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-special">[</span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Refactoring</span><span> </span><span class="hs-identifier hs-type">R.SrcSpan</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-72"></a><a name="simplifyHead"><a href="Hint.Import.html#simplifyHead"><span class="hs-identifier">simplifyHead</span></a></a><span> </span><a name="local-6989586621679279709"><a href="#local-6989586621679279709"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-73"></a><span class="hs-identifier">simplifyHead</span><span> </span><a name="local-6989586621679279710"><a href="#local-6989586621679279710"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679279711"><a href="#local-6989586621679279711"><span class="hs-identifier">y</span></a></a><span class="hs-glyph">:</span><a name="local-6989586621679279712"><a href="#local-6989586621679279712"><span class="hs-identifier">ys</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="Hint.Import.html#combine"><span class="hs-identifier hs-var">combine</span></a><span> </span><a href="#local-6989586621679279710"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679279711"><span class="hs-identifier hs-var">y</span></a><span> </span><span class="hs-keyword">of</span><span>
</span><a name="line-74"></a><span>    </span><span class="hs-identifier hs-var">Nothing</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">first</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279711"><span class="hs-identifier hs-var">y</span></a><span class="hs-glyph">:</span><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">&lt;$&gt;</span><span> </span><a href="Hint.Import.html#simplifyHead"><span class="hs-identifier hs-var">simplifyHead</span></a><span> </span><a href="#local-6989586621679279710"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="#local-6989586621679279712"><span class="hs-identifier hs-var">ys</span></a><span>
</span><a name="line-75"></a><span>    </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279713"><a href="#local-6989586621679279713"><span class="hs-identifier">xy</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679279714"><a href="#local-6989586621679279714"><span class="hs-identifier">rs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279713"><span class="hs-identifier hs-var">xy</span></a><span> </span><span class="hs-glyph">:</span><span> </span><a href="#local-6989586621679279712"><span class="hs-identifier hs-var">ys</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279714"><span class="hs-identifier hs-var">rs</span></a><span class="hs-special">)</span><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span>
</span><a name="line-78"></a><span class="hs-identifier">combine</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Refactoring</span><span> </span><span class="hs-identifier hs-type">R.SrcSpan</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-79"></a><a name="combine"><a href="Hint.Import.html#combine"><span class="hs-identifier">combine</span></a></a><span> </span><a name="local-6989586621679279715"><a href="#local-6989586621679279715"><span class="hs-identifier">x</span></a></a><span> </span><a name="local-6989586621679279716"><a href="#local-6989586621679279716"><span class="hs-identifier">y</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679279717"><span class="hs-identifier hs-var">qual</span></a><span class="hs-special">,</span><span> </span><span class="hs-keyword">as</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279720"><span class="hs-identifier hs-var">specs</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">Delete</span><span> </span><span class="hs-identifier hs-var">Import</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-80"></a><span>           </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679279717"><span class="hs-identifier hs-var">qual</span></a><span class="hs-special">,</span><span> </span><span class="hs-keyword">as</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ImportSpecList</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a name="local-6989586621679279721"><a href="#local-6989586621679279721"><span class="hs-identifier">xs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">ImportSpecList</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a name="local-6989586621679279722"><a href="#local-6989586621679279722"><span class="hs-identifier">ys</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679279723"><a href="#local-6989586621679279723"><span class="hs-identifier">newImp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">{</span><span class="hs-identifier">importSpecs</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">ImportSpecList</span><span> </span><a href="HSE.Util.html#an"><span class="hs-identifier hs-var">an</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="HSE.Util.html#nub_"><span class="hs-identifier hs-var">nub_</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679279721"><span class="hs-identifier hs-var">xs</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679279722"><span class="hs-identifier hs-var">ys</span></a><span class="hs-special">}</span><span>
</span><a name="line-81"></a><span>            </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279723"><span class="hs-identifier hs-var">newImp</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span> </span><span class="hs-identifier hs-var">Replace</span><span> </span><span class="hs-identifier hs-var">Import</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>  </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">prettyPrint</span><span> </span><a href="#local-6989586621679279723"><span class="hs-identifier hs-var">newImp</span></a><span class="hs-special">)</span><span>
</span><a name="line-82"></a><span>                             </span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">Delete</span><span> </span><span class="hs-identifier hs-var">Import</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">]</span><span> </span><span class="hs-special">)</span><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span>           </span><span class="hs-glyph">|</span><span> </span><a href="#local-6989586621679279717"><span class="hs-identifier hs-var">qual</span></a><span class="hs-special">,</span><span> </span><span class="hs-keyword">as</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">isNothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">||</span><span> </span><span class="hs-identifier hs-var">isNothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-85"></a><span>             </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279724"><a href="#local-6989586621679279724"><span class="hs-identifier">newImp</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679279725"><a href="#local-6989586621679279725"><span class="hs-identifier">toDelete</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">isNothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-86"></a><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279724"><span class="hs-identifier hs-var">newImp</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">Delete</span><span> </span><span class="hs-identifier hs-var">Import</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279725"><span class="hs-identifier hs-var">toDelete</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-87"></a><span>           </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">not</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importQualified</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279717"><span class="hs-identifier hs-var">qual</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279720"><span class="hs-identifier hs-var">specs</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">length</span><span> </span><a href="#local-6989586621679279719"><span class="hs-identifier hs-var">ass</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-number">1</span><span> </span><span class="hs-glyph">=</span><span>
</span><a name="line-88"></a><span>             </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279726"><a href="#local-6989586621679279726"><span class="hs-identifier">newImp</span></a></a><span class="hs-special">,</span><span> </span><a name="local-6989586621679279727"><a href="#local-6989586621679279727"><span class="hs-identifier">toDelete</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-identifier hs-var">isJust</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importAs</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-89"></a><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679279726"><span class="hs-identifier hs-var">newImp</span></a><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">Delete</span><span> </span><span class="hs-identifier hs-var">Import</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279727"><span class="hs-identifier hs-var">toDelete</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><a name="line-90"></a><span>
</span><a name="line-91"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-92"></a><span>        </span><a name="local-6989586621679279717"><a href="#local-6989586621679279717"><span class="hs-identifier">qual</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">importQualified</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier">importQualified</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span>
</span><a name="line-93"></a><span>        </span><span class="hs-keyword">as</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">importAs</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-special">`</span><a href="HSE.Util.html#eqMaybe"><span class="hs-identifier hs-var">eqMaybe</span></a><span class="hs-special">`</span><span> </span><span class="hs-identifier">importAs</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span>
</span><a name="line-94"></a><span>        </span><a name="local-6989586621679279719"><a href="#local-6989586621679279719"><span class="hs-identifier">ass</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mapMaybe</span><span> </span><span class="hs-identifier">importAs</span><span> </span><span class="hs-special">[</span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span class="hs-special">]</span><span>
</span><a name="line-95"></a><span>        </span><a name="local-6989586621679279720"><a href="#local-6989586621679279720"><span class="hs-identifier">specs</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279715"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-special">`</span><a href="HSE.Util.html#eqMaybe"><span class="hs-identifier hs-var">eqMaybe</span></a><span class="hs-special">`</span><span> </span><span class="hs-identifier">importSpecs</span><span> </span><a href="#local-6989586621679279716"><span class="hs-identifier hs-var">y</span></a><span>
</span><a name="line-96"></a><span>
</span><a name="line-97"></a><span class="hs-identifier">combine</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span class="hs-identifier">combine1</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-100"></a><a name="combine1"><a href="Hint.Import.html#combine1"><span class="hs-identifier">combine1</span></a></a><span> </span><a name="local-6989586621679279728"><a href="#local-6989586621679279728"><span class="hs-identifier">i</span></a></a><span class="hs-glyph">@</span><span class="hs-identifier hs-var">ImportDecl</span><span class="hs-special">{</span><span class="hs-glyph">..</span><span class="hs-special">}</span><span>
</span><a name="line-101"></a><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><a href="HSE.Util.html#dropAnn"><span class="hs-identifier hs-var">dropAnn</span></a><span> </span><a href="#local-6989586621679279730"><span class="hs-identifier hs-var">importModule</span></a><span class="hs-special">)</span><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">fmap</span><span> </span><a href="HSE.Util.html#dropAnn"><span class="hs-identifier hs-var">dropAnn</span></a><span> </span><a href="#local-6989586621679279735"><span class="hs-identifier hs-var">importAs</span></a><span>
</span><a name="line-102"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Idea.html#suggest"><span class="hs-identifier hs-var">suggest</span></a><span> </span><span class="hs-string">&quot;Redundant as&quot;</span><span> </span><a href="#local-6989586621679279728"><span class="hs-identifier hs-var">i</span></a><span> </span><a href="#local-6989586621679279728"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">{</span><span class="hs-identifier">importAs</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">}</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">RemoveAsKeyword</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279728"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><a name="line-103"></a><span class="hs-identifier">combine1</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span>
</span><a name="line-106"></a><a name="newNames"><a href="Hint.Import.html#newNames"><span class="hs-identifier">newNames</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679279737"><a href="#local-6989586621679279737"><span class="hs-operator">*</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">flip</span><span> </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">in</span><span>
</span><a name="line-107"></a><span>    </span><span class="hs-special">[</span><span class="hs-string">&quot;Control&quot;</span><span> </span><a href="#local-6989586621679279737"><span class="hs-operator hs-var">*</span></a><span> </span><span class="hs-string">&quot;Monad&quot;</span><span>
</span><a name="line-108"></a><span>    </span><span class="hs-special">,</span><span class="hs-string">&quot;Data&quot;</span><span> </span><a href="#local-6989586621679279737"><span class="hs-operator hs-var">*</span></a><span> </span><span class="hs-string">&quot;Char&quot;</span><span>
</span><a name="line-109"></a><span>    </span><span class="hs-special">,</span><span class="hs-string">&quot;Data&quot;</span><span> </span><a href="#local-6989586621679279737"><span class="hs-operator hs-var">*</span></a><span> </span><span class="hs-string">&quot;List&quot;</span><span>
</span><a name="line-110"></a><span>    </span><span class="hs-special">,</span><span class="hs-string">&quot;Data&quot;</span><span> </span><a href="#local-6989586621679279737"><span class="hs-operator hs-var">*</span></a><span> </span><span class="hs-string">&quot;Maybe&quot;</span><span>
</span><a name="line-111"></a><span>    </span><span class="hs-special">,</span><span class="hs-string">&quot;Data&quot;</span><span> </span><a href="#local-6989586621679279737"><span class="hs-operator hs-var">*</span></a><span> </span><span class="hs-string">&quot;Ratio&quot;</span><span>
</span><a name="line-112"></a><span>    </span><span class="hs-special">,</span><span class="hs-string">&quot;System&quot;</span><span> </span><a href="#local-6989586621679279737"><span class="hs-operator hs-var">*</span></a><span> </span><span class="hs-string">&quot;Directory&quot;</span><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span>    </span><span class="hs-comment">-- Special, see bug https://code.google.com/archive/p/ndmitchell/issues/393</span><span>
</span><a name="line-115"></a><span>    </span><span class="hs-comment">-- ,&quot;System&quot; * &quot;IO&quot;</span><span>
</span><a name="line-116"></a><span>
</span><a name="line-117"></a><span>    </span><span class="hs-comment">-- Do not encourage use of old-locale/old-time over haskell98</span><span>
</span><a name="line-118"></a><span>    </span><span class="hs-comment">-- ,&quot;System&quot; * &quot;Locale&quot;</span><span>
</span><a name="line-119"></a><span>    </span><span class="hs-comment">-- ,&quot;System&quot; * &quot;Time&quot;</span><span>
</span><a name="line-120"></a><span>    </span><span class="hs-special">]</span><span>
</span><a name="line-121"></a><span>
</span><a name="line-122"></a><span>
</span><a name="line-123"></a><span class="hs-identifier">hierarchy</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><a href="Idea.html#Idea"><span class="hs-identifier hs-type">Idea</span></a><span class="hs-special">]</span><span>
</span><a name="line-124"></a><a name="hierarchy"><a href="Hint.Import.html#hierarchy"><span class="hs-identifier">hierarchy</span></a></a><span> </span><a name="local-6989586621679279738"><a href="#local-6989586621679279738"><span class="hs-identifier">i</span></a></a><span class="hs-glyph">@</span><span class="hs-identifier hs-var">ImportDecl</span><span class="hs-special">{</span><span class="hs-identifier">importModule</span><span class="hs-glyph">=</span><a name="local-6989586621679279739"><a href="#local-6989586621679279739"><span class="hs-identifier">m</span></a></a><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="hs-identifier hs-var">ModuleName</span><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679279740"><a href="#local-6989586621679279740"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span class="hs-special">,</span><span class="hs-identifier">importPkg</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><a name="local-6989586621679279741"><a href="#local-6989586621679279741"><span class="hs-identifier">y</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">lookup</span><span> </span><a href="#local-6989586621679279740"><span class="hs-identifier hs-var">x</span></a><span> </span><a href="Hint.Import.html#newNames"><span class="hs-identifier hs-var">newNames</span></a><span>
</span><a name="line-125"></a><span>    </span><span class="hs-glyph">=</span><span>
</span><a name="line-126"></a><span>    </span><span class="hs-keyword">let</span><span> </span><a name="local-6989586621679279742"><a href="#local-6989586621679279742"><span class="hs-identifier">newModuleName</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679279741"><span class="hs-identifier hs-var">y</span></a><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-string">&quot;.&quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><a href="#local-6989586621679279740"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-127"></a><span>        </span><a name="local-6989586621679279743"><a href="#local-6989586621679279743"><span class="hs-identifier">r</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">Replace</span><span> </span><span class="hs-identifier hs-var">R.ModuleName</span><span> </span><span class="hs-special">(</span><a href="Refact.html#toSS"><span class="hs-identifier hs-var">toSS</span></a><span> </span><a href="#local-6989586621679279739"><span class="hs-identifier hs-var">m</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><a href="#local-6989586621679279742"><span class="hs-identifier hs-var">newModuleName</span></a><span class="hs-special">]</span><span> </span><span class="hs-keyword">in</span><span>
</span><a name="line-128"></a><span>    </span><span class="hs-special">[</span><a href="Idea.html#suggest"><span class="hs-identifier hs-var">suggest</span></a><span> </span><span class="hs-string">&quot;Use hierarchical imports&quot;</span><span> </span><a href="#local-6989586621679279738"><span class="hs-identifier hs-var">i</span></a><span> </span><span class="hs-special">(</span><a href="Hint.Import.html#desugarQual"><span class="hs-identifier hs-var">desugarQual</span></a><span> </span><a href="#local-6989586621679279738"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span class="hs-special">{</span><span class="hs-identifier">importModule</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">ModuleName</span><span> </span><a href="HSE.Util.html#an"><span class="hs-identifier hs-var">an</span></a><span> </span><a href="#local-6989586621679279742"><span class="hs-identifier hs-var">newModuleName</span></a><span class="hs-special">}</span><span> </span><a href="#local-6989586621679279743"><span class="hs-identifier hs-var">r</span></a><span class="hs-special">]</span><span>
</span><a name="line-129"></a><span>
</span><a name="line-130"></a><span class="hs-comment">-- import IO is equivalent to</span><span>
</span><a name="line-131"></a><span class="hs-comment">-- import System.IO, import System.IO.Error, import Control.Exception(bracket, bracket_)</span><span>
</span><a name="line-132"></a><span class="hs-identifier">hierarchy</span><span> </span><a name="local-6989586621679279744"><a href="#local-6989586621679279744"><span class="hs-identifier">i</span></a></a><span class="hs-glyph">@</span><span class="hs-identifier hs-var">ImportDecl</span><span class="hs-special">{</span><span class="hs-identifier">importModule</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">ModuleName</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-string">&quot;IO&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-identifier">importSpecs</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">,</span><span class="hs-identifier">importPkg</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">}</span><span>
</span><a name="line-133"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><a href="Idea.html#rawIdeaN"><span class="hs-identifier hs-var">rawIdeaN</span></a><span> </span><a href="Config.Type.html#Suggestion"><span class="hs-identifier hs-var">Suggestion</span></a><span> </span><span class="hs-string">&quot;Use hierarchical imports&quot;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">srcInfoSpan</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">ann</span><span> </span><a href="#local-6989586621679279744"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">trimStart</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">prettyPrint</span><span> </span><a href="#local-6989586621679279744"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-134"></a><span>          </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">unlines</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">map</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">trimStart</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><span class="hs-identifier hs-var">prettyPrint</span><span class="hs-special">)</span><span>
</span><a name="line-135"></a><span>          </span><span class="hs-special">[</span><a href="#local-6989586621679279745"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-string">&quot;System.IO&quot;</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span class="hs-special">,</span><span> </span><a href="#local-6989586621679279745"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-string">&quot;System.IO.Error&quot;</span><span> </span><span class="hs-identifier hs-var">Nothing</span><span>
</span><a name="line-136"></a><span>          </span><span class="hs-special">,</span><a href="#local-6989586621679279745"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-string">&quot;Control.Exception&quot;</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">ImportSpecList</span><span> </span><a href="HSE.Util.html#an"><span class="hs-identifier hs-var">an</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-var">IVar</span><span> </span><a href="HSE.Util.html#an"><span class="hs-identifier hs-var">an</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="HSE.Match.html#toNamed"><span class="hs-identifier hs-var">toNamed</span></a><span> </span><a href="#local-6989586621679279748"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-glyph">|</span><span> </span><a name="local-6989586621679279748"><a href="#local-6989586621679279748"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-special">[</span><span class="hs-string">&quot;bracket&quot;</span><span class="hs-special">,</span><span class="hs-string">&quot;bracket_&quot;</span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">]</span><span class="hs-special">)</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">]</span><span>
</span><a name="line-137"></a><span>    </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679279745"><a href="#local-6989586621679279745"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679279746"><a href="#local-6989586621679279746"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679279747"><a href="#local-6989586621679279747"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Hint.Import.html#desugarQual"><span class="hs-identifier hs-var">desugarQual</span></a><span> </span><a href="#local-6989586621679279744"><span class="hs-identifier hs-var">i</span></a><span class="hs-special">)</span><span class="hs-special">{</span><span class="hs-identifier">importModule</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">ModuleName</span><span> </span><a href="HSE.Util.html#an"><span class="hs-identifier hs-var">an</span></a><span> </span><a href="#local-6989586621679279746"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier">importSpecs</span><span class="hs-glyph">=</span><a href="#local-6989586621679279747"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">}</span><span>
</span><a name="line-138"></a><span>
</span><a name="line-139"></a><span class="hs-identifier">hierarchy</span><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-140"></a><span>
</span><a name="line-141"></a><span>
</span><a name="line-142"></a><span class="hs-comment">-- import qualified X ==&gt; import qualified X as X</span><span>
</span><a name="line-143"></a><span class="hs-identifier">desugarQual</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">ImportDecl</span><span> </span><a href="HSE.Type.html#S"><span class="hs-identifier hs-type">S</span></a><span>
</span><a name="line-144"></a><a name="desugarQual"><a href="Hint.Import.html#desugarQual"><span class="hs-identifier">desugarQual</span></a></a><span> </span><a name="local-6989586621679279749"><a href="#local-6989586621679279749"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">importQualified</span><span> </span><a href="#local-6989586621679279749"><span class="hs-identifier hs-var">x</span></a><span> </span><span class="hs-operator hs-var">&amp;&amp;</span><span> </span><span class="hs-identifier hs-var">isNothing</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importAs</span><span> </span><a href="#local-6989586621679279749"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679279749"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">{</span><span class="hs-identifier">importAs</span><span class="hs-glyph">=</span><span class="hs-identifier hs-var">Just</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">importModule</span><span> </span><a href="#local-6989586621679279749"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><a name="line-145"></a><span>              </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679279749"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-146"></a></pre></body></html>