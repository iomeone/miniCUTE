<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><a name="line-2"></a><span>
</span><a name="line-3"></a><span class="hs-comment">-- | In some cases, 'Data' instances for abstract types are incorrect,</span><span>
</span><a name="line-4"></a><span class="hs-comment">--   and fail to work correctly with Uniplate. This module defines three helper</span><span>
</span><a name="line-5"></a><span class="hs-comment">--   types ('Hide', 'Trigger' and 'Invariant') to assist when writing instances</span><span>
</span><a name="line-6"></a><span class="hs-comment">--   for abstract types. The 'Hide' type is useful when you want to mark some part</span><span>
</span><a name="line-7"></a><span class="hs-comment">--   of your data type as being ignored by &quot;Data.Generics.Uniplate.Data&quot;</span><span>
</span><a name="line-8"></a><span class="hs-comment">--   (and any other 'Data' based generics libraries, such as @syb@).</span><span>
</span><a name="line-9"></a><span class="hs-comment">--</span><span>
</span><a name="line-10"></a><span class="hs-comment">--   Using the helper types, this module defines wrappers for types in</span><span>
</span><a name="line-11"></a><span class="hs-comment">--   the @containers@ package, namely 'Map', 'Set', 'IntMap' and 'IntSet'.</span><span>
</span><a name="line-12"></a><span class="hs-comment">--   The standard @containers@ 'Data' instances all treat the types as abstract,</span><span>
</span><a name="line-13"></a><span class="hs-comment">--   but the wrapper types allow you to traverse within the data types, ensuring</span><span>
</span><a name="line-14"></a><span class="hs-comment">--   the necessary invariants are maintained. In particular, if you do not modify</span><span>
</span><a name="line-15"></a><span class="hs-comment">--   the keys reconstruct will be /O(n)/ instead of /O(n log n)/.</span><span>
</span><a name="line-16"></a><span class="hs-comment">--</span><span>
</span><a name="line-17"></a><span class="hs-comment">--   As an example of how to implement your own abstract type wrappers, the 'Map' data</span><span>
</span><a name="line-18"></a><span class="hs-comment">--   type is defined as:</span><span>
</span><a name="line-19"></a><span class="hs-comment">--</span><span>
</span><a name="line-20"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-21"></a><span class="hs-comment">--   newtype Map k v = Map ('Invariant' ('Trigger' [k], 'Trigger' [v], Hide (Map.Map k v)))</span><span>
</span><a name="line-22"></a><span class="hs-comment">--      deriving (Data, Typeable)</span><span>
</span><a name="line-23"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-24"></a><span class="hs-comment">--</span><span>
</span><a name="line-25"></a><span class="hs-comment">--   The 'Map' type is defined as an 'Invariant' of three components - the keys, the values, and</span><span>
</span><a name="line-26"></a><span class="hs-comment">--   the underlying @Map@. We use 'Invariant' to ensure that the keys/values/map always remain in sync.</span><span>
</span><a name="line-27"></a><span class="hs-comment">--   We use 'Trigger' on the keys and values to ensure that whenever the keys or values change we</span><span>
</span><a name="line-28"></a><span class="hs-comment">--   rebuild the @Map@, but if they don't, we reuse the previous @Map@. The 'fromMap' function is</span><span>
</span><a name="line-29"></a><span class="hs-comment">--   implemented by pattern matching on the 'Map' type:</span><span>
</span><a name="line-30"></a><span class="hs-comment">--</span><span>
</span><a name="line-31"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-32"></a><span class="hs-comment">--   'fromMap' ('Map' ('Invariant' _ (_,_,'Hide' x))) = x</span><span>
</span><a name="line-33"></a><span class="hs-comment">-- @</span><span>
</span><a name="line-34"></a><span class="hs-comment">--</span><span>
</span><a name="line-35"></a><span class="hs-comment">--   The 'toMap' function is slightly harder, as we need to come up with an invariant restoring function:</span><span>
</span><a name="line-36"></a><span class="hs-comment">--</span><span>
</span><a name="line-37"></a><span class="hs-comment">-- &gt; toMap :: Ord k =&gt; Map.Map k v -&gt; Map k v</span><span>
</span><a name="line-38"></a><span class="hs-comment">-- &gt; toMap x = Map $ Invariant inv $ create x</span><span>
</span><a name="line-39"></a><span class="hs-comment">-- &gt;     where</span><span>
</span><a name="line-40"></a><span class="hs-comment">-- &gt;         create x = (Trigger False ks, Trigger False vs, Hide x)</span><span>
</span><a name="line-41"></a><span class="hs-comment">-- &gt;             where (ks,vs) = unzip $ Map.toAscList x</span><span>
</span><a name="line-42"></a><span class="hs-comment">-- &gt; </span><span>
</span><a name="line-43"></a><span class="hs-comment">-- &gt;         inv (ks,vs,x)</span><span>
</span><a name="line-44"></a><span class="hs-comment">-- &gt;             | trigger ks = create $ Map.fromList $ zip (fromTrigger ks) (fromTrigger vs)</span><span>
</span><a name="line-45"></a><span class="hs-comment">-- &gt;             | trigger vs = create $ Map.fromDistinctAscList $ zip (fromTrigger ks) (fromTrigger vs)</span><span>
</span><a name="line-46"></a><span class="hs-comment">-- &gt;             | otherwise = (ks,vs,x)</span><span>
</span><a name="line-47"></a><span class="hs-comment">--</span><span>
</span><a name="line-48"></a><span class="hs-comment">--   The 'create' function creates a value from a @Map@, getting the correct keys and values. The 'inv'</span><span>
</span><a name="line-49"></a><span class="hs-comment">--   function looks at the triggers on the keys/values. If the keys trigger has been tripped, then we</span><span>
</span><a name="line-50"></a><span class="hs-comment">--   reconstruct the @Map@ using @fromList@. If the values trigger has been tripped, but they keys trigger</span><span>
</span><a name="line-51"></a><span class="hs-comment">--   has not, we can use @fromDistinctAscList@, reducing the complexity of constructing the @Map@. If nothing</span><span>
</span><a name="line-52"></a><span class="hs-comment">--   has changed we can reuse the previous value.</span><span>
</span><a name="line-53"></a><span class="hs-comment">--</span><span>
</span><a name="line-54"></a><span class="hs-comment">--   The end result is that all Uniplate (or @syb@) traversals over 'Map' result in a valid value, which has</span><span>
</span><a name="line-55"></a><span class="hs-comment">--   had all appropriate transformations applied.</span><span>
</span><a name="line-56"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Data.Generics.Uniplate.Data.Instances</span><span class="hs-special">(</span><span>
</span><a name="line-57"></a><span>    </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-58"></a><span>    </span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-type">Map</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier hs-var">fromMap</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#toMap"><span class="hs-identifier hs-var">toMap</span></a><span class="hs-special">,</span><span>
</span><a name="line-59"></a><span>    </span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-type">Set</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier hs-var">fromSet</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#toSet"><span class="hs-identifier hs-var">toSet</span></a><span class="hs-special">,</span><span>
</span><a name="line-60"></a><span>    </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-type">IntMap</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier hs-var">fromIntMap</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#toIntMap"><span class="hs-identifier hs-var">toIntMap</span></a><span class="hs-special">,</span><span>
</span><a name="line-61"></a><span>    </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-type">IntSet</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier hs-var">fromIntSet</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#toIntSet"><span class="hs-identifier hs-var">toIntSet</span></a><span>
</span><a name="line-62"></a><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-63"></a><span>
</span><a name="line-64"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data.Data</span><span>
</span><a name="line-65"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Map</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Map</span><span>
</span><a name="line-66"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.Set</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">Set</span><span>
</span><a name="line-67"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.IntMap</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">IntMap</span><span>
</span><a name="line-68"></a><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-identifier">Data.IntSet</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="hs-identifier">IntSet</span><span>
</span><a name="line-69"></a><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><a name="line-72"></a><span class="hs-comment">-- DATA TYPES</span><span>
</span><a name="line-73"></a><span>
</span><a name="line-74"></a><span class="hs-comment">-- | The 'Hide' data type has a 'Data' instance which reports having no constructors,</span><span>
</span><a name="line-75"></a><span class="hs-comment">--   as though the type was defined as using the extension @EmptyDataDecls@:</span><span>
</span><a name="line-76"></a><span class="hs-comment">--</span><span>
</span><a name="line-77"></a><span class="hs-comment">-- &gt; data Hide a</span><span>
</span><a name="line-78"></a><span class="hs-comment">--</span><span>
</span><a name="line-79"></a><span class="hs-comment">--   This type is suitable for defining regions that are avoided by Uniplate traversals.</span><span>
</span><a name="line-80"></a><span class="hs-comment">--   As an example:</span><span>
</span><a name="line-81"></a><span class="hs-comment">--</span><span>
</span><a name="line-82"></a><span class="hs-comment">-- &gt; transformBi (+1) (1, 2, Hide 3, Just 4) == (2, 3, Hide 3, Just 4)</span><span>
</span><a name="line-83"></a><span class="hs-comment">--</span><span>
</span><a name="line-84"></a><span class="hs-comment">--   As a result of having no constructors, any calls to the methods 'toConstr' or 'gunfold'</span><span>
</span><a name="line-85"></a><span class="hs-comment">--   will raise an error.</span><span>
</span><a name="line-86"></a><span class="hs-keyword">newtype</span><span> </span><a name="Hide"><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier">Hide</span></a></a><span> </span><a name="local-6989586621679034858"><a href="#local-6989586621679034858"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Hide"><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier">Hide</span></a></a><span> </span><span class="hs-special">{</span><a name="fromHide"><a href="Data.Generics.Uniplate.Data.Instances.html#fromHide"><span class="hs-identifier">fromHide</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679034858"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">}</span><span>
</span><a name="line-87"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Read</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-88"></a><span>
</span><a name="line-89"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679034932"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><a href="#local-6989586621679034932"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-90"></a><span>    </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a name="local-6989586621679034933"><a href="#local-6989586621679034933"><span class="hs-identifier">a</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Hide &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679034933"><span class="hs-identifier hs-var">a</span></a><span>
</span><a name="line-91"></a><span>
</span><a name="line-92"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-93"></a><span>    </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679034930"><a href="#local-6989586621679034930"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a name="local-6989586621679034931"><a href="#local-6989586621679034931"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679034930"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679034931"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-94"></a><span>
</span><a name="line-95"></a><span>
</span><a name="line-96"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span> </span><a href="#local-6989586621679034923"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><a href="#local-6989586621679034923"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-97"></a><span>    </span><a name="local-8214565720323786787"><span class="hs-identifier">gfoldl</span></a><span> </span><a name="local-6989586621679034924"><a href="#local-6989586621679034924"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679034925"><a href="#local-6989586621679034925"><span class="hs-identifier">z</span></a></a><span> </span><a name="local-6989586621679034926"><a href="#local-6989586621679034926"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034925"><span class="hs-identifier hs-var">z</span></a><span> </span><a href="#local-6989586621679034926"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-98"></a><span>    </span><a name="local-8214565720323786786"><span class="hs-identifier">gunfold</span></a><span> </span><a name="local-6989586621679034927"><a href="#local-6989586621679034927"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679034928"><a href="#local-6989586621679034928"><span class="hs-identifier">z</span></a></a><span> </span><a name="local-6989586621679034929"><a href="#local-6989586621679034929"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;Data.Generics.Uniplate.Data.Instances.Hide: gunfold not implemented - data type has no constructors&quot;</span><span>
</span><a name="line-99"></a><span>    </span><a name="local-8214565720323786785"><span class="hs-identifier">toConstr</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">error</span><span> </span><span class="hs-string">&quot;Data.Generics.Uniplate.Data.Instances.Hide: toConstr not implemented - data type has no constructors&quot;</span><span>
</span><a name="line-100"></a><span>    </span><a name="local-8214565720323786784"><span class="hs-identifier">dataTypeOf</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#tyHide"><span class="hs-identifier hs-var">tyHide</span></a><span>
</span><a name="line-101"></a><span>
</span><a name="line-102"></a><a name="tyHide"><a href="Data.Generics.Uniplate.Data.Instances.html#tyHide"><span class="hs-identifier">tyHide</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkDataType</span><span> </span><span class="hs-string">&quot;Data.Generics.Uniplate.Data.Instances.Hide&quot;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><a name="line-103"></a><span>
</span><a name="line-104"></a><span>
</span><a name="line-105"></a><span class="hs-comment">-- | The 'Trigger' data type has a 'Data' instance which reports as being defined:</span><span>
</span><a name="line-106"></a><span class="hs-comment">--</span><span>
</span><a name="line-107"></a><span class="hs-comment">-- &gt; data Trigger a = Trigger a</span><span>
</span><a name="line-108"></a><span class="hs-comment">--</span><span>
</span><a name="line-109"></a><span class="hs-comment">--   However, whenever a 'gfoldl' or 'gunfold' constructs a new value, it will have the</span><span>
</span><a name="line-110"></a><span class="hs-comment">--   'trigger' field set to 'True'. The trigger information is useful to indicate whether</span><span>
</span><a name="line-111"></a><span class="hs-comment">--   any invariants have been broken, and thus need fixing. As an example:</span><span>
</span><a name="line-112"></a><span class="hs-comment">--</span><span>
</span><a name="line-113"></a><span class="hs-comment">-- &gt; data SortedList a = SortedList (Trigger [a]) deriving (Data,Typeable)</span><span>
</span><a name="line-114"></a><span class="hs-comment">-- &gt; toSortedList xs = SortedList $ Trigger False $ sort xs</span><span>
</span><a name="line-115"></a><span class="hs-comment">-- &gt; fromSortedList (SortedList (Trigger t xs)) = if t then sort xs else xs</span><span>
</span><a name="line-116"></a><span class="hs-comment">--</span><span>
</span><a name="line-117"></a><span class="hs-comment">--   This data type represents a sorted list. When constructed the items are initially sorted,</span><span>
</span><a name="line-118"></a><span class="hs-comment">--   but operations such as 'gmapT' could break that invariant. The 'Trigger' type is used to</span><span>
</span><a name="line-119"></a><span class="hs-comment">--   detect when the Data operations have been performed, and resort the list.</span><span>
</span><a name="line-120"></a><span class="hs-comment">--</span><span>
</span><a name="line-121"></a><span class="hs-comment">--   The 'Trigger' type is often used in conjunction with 'Invariant', which fixes the invariants.</span><span>
</span><a name="line-122"></a><span class="hs-keyword">data</span><span> </span><a name="Trigger"><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier">Trigger</span></a></a><span> </span><a name="local-6989586621679033836"><a href="#local-6989586621679033836"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Trigger"><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier">Trigger</span></a></a><span> </span><span class="hs-special">{</span><a name="trigger"><a href="Data.Generics.Uniplate.Data.Instances.html#trigger"><span class="hs-identifier">trigger</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Bool</span><span class="hs-special">,</span><span> </span><a name="fromTrigger"><a href="Data.Generics.Uniplate.Data.Instances.html#fromTrigger"><span class="hs-identifier">fromTrigger</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679033836"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">}</span><span>
</span><a name="line-123"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Read</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Ord</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-124"></a><span>
</span><a name="line-125"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Functor</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-126"></a><span>    </span><a name="local-3458764513820541101"><span class="hs-identifier">fmap</span></a><span> </span><a name="local-6989586621679034920"><a href="#local-6989586621679034920"><span class="hs-identifier">f</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><a name="local-6989586621679034921"><a href="#local-6989586621679034921"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679034922"><a href="#local-6989586621679034922"><span class="hs-identifier">b</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><a href="#local-6989586621679034921"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679034920"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679034922"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-127"></a><span>
</span><a name="line-128"></a><span>
</span><a name="line-129"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span> </span><a href="#local-6989586621679034913"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span> </span><a href="#local-6989586621679034913"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><a href="#local-6989586621679034913"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-130"></a><span>    </span><a name="local-8214565720323786787"><span class="hs-identifier">gfoldl</span></a><span> </span><a name="local-6989586621679034914"><a href="#local-6989586621679034914"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679034915"><a href="#local-6989586621679034915"><span class="hs-identifier">z</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679034916"><a href="#local-6989586621679034916"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034915"><span class="hs-identifier hs-var">z</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">True</span><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><a href="#local-6989586621679034914"><span class="hs-identifier hs-var">k</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621679034916"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-131"></a><span>    </span><a name="local-8214565720323786786"><span class="hs-identifier">gunfold</span></a><span> </span><a name="local-6989586621679034917"><a href="#local-6989586621679034917"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679034918"><a href="#local-6989586621679034918"><span class="hs-identifier">z</span></a></a><span> </span><a name="local-6989586621679034919"><a href="#local-6989586621679034919"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034917"><span class="hs-identifier hs-var">k</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679034918"><span class="hs-identifier hs-var">z</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">True</span><span>
</span><a name="line-132"></a><span>    </span><a name="local-8214565720323786785"><span class="hs-identifier">toConstr</span></a><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#conTrigger"><span class="hs-identifier hs-var">conTrigger</span></a><span>
</span><a name="line-133"></a><span>    </span><a name="local-8214565720323786784"><span class="hs-identifier">dataTypeOf</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#tyTrigger"><span class="hs-identifier hs-var">tyTrigger</span></a><span>
</span><a name="line-134"></a><span>
</span><a name="line-135"></a><a name="conTrigger"><a href="Data.Generics.Uniplate.Data.Instances.html#conTrigger"><span class="hs-identifier">conTrigger</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkConstr</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#tyTrigger"><span class="hs-identifier hs-var">tyTrigger</span></a><span> </span><span class="hs-string">&quot;Trigger&quot;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-identifier hs-var">Prefix</span><span>
</span><a name="line-136"></a><a name="tyTrigger"><a href="Data.Generics.Uniplate.Data.Instances.html#tyTrigger"><span class="hs-identifier">tyTrigger</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkDataType</span><span> </span><span class="hs-string">&quot;Data.Generics.Uniplate.Data.Instances.Trigger&quot;</span><span> </span><span class="hs-special">[</span><a href="Data.Generics.Uniplate.Data.Instances.html#conTrigger"><span class="hs-identifier hs-var">conTrigger</span></a><span class="hs-special">]</span><span>
</span><a name="line-137"></a><span>
</span><a name="line-138"></a><span>
</span><a name="line-139"></a><span class="hs-comment">-- | The 'Invariant' data type as a 'Data' instance which reports as being defined:</span><span>
</span><a name="line-140"></a><span class="hs-comment">--</span><span>
</span><a name="line-141"></a><span class="hs-comment">-- &gt; data Invariant a = Invariant a</span><span>
</span><a name="line-142"></a><span class="hs-comment">--</span><span>
</span><a name="line-143"></a><span class="hs-comment">--   However, whenever a 'gfoldl' constructs a new value, it will have the function in</span><span>
</span><a name="line-144"></a><span class="hs-comment">--   the 'invariant' field applied to it. As an example:</span><span>
</span><a name="line-145"></a><span class="hs-comment">--</span><span>
</span><a name="line-146"></a><span class="hs-comment">-- &gt; data SortedList a = SortedList (Invariant [a]) deriving (Data,Typeable)</span><span>
</span><a name="line-147"></a><span class="hs-comment">-- &gt; toSortedList xs = SortedList $ Invariant sort (sort xs)</span><span>
</span><a name="line-148"></a><span class="hs-comment">-- &gt; fromSortedList (SortedList (Invariant _ xs)) = xs</span><span>
</span><a name="line-149"></a><span class="hs-comment">--</span><span>
</span><a name="line-150"></a><span class="hs-comment">--   Any time an operation such as 'gmapT' is applied to the data type, the 'invariant' function</span><span>
</span><a name="line-151"></a><span class="hs-comment">--   is applied to the result. The @fromSortedList@ function can then rely on this invariant.</span><span>
</span><a name="line-152"></a><span class="hs-comment">--</span><span>
</span><a name="line-153"></a><span class="hs-comment">--   The 'gunfold' method is partially implemented - all constructed values will have an undefined</span><span>
</span><a name="line-154"></a><span class="hs-comment">--   value for all fields, regardless of which function is passed to 'fromConstrB'. If you only use</span><span>
</span><a name="line-155"></a><span class="hs-comment">--   'fromConstr' (as Uniplate does) then the 'gunfold' method is sufficient.</span><span>
</span><a name="line-156"></a><span class="hs-keyword">data</span><span> </span><a name="Invariant"><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier">Invariant</span></a></a><span> </span><a name="local-6989586621679033835"><a href="#local-6989586621679033835"><span class="hs-identifier">a</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Invariant"><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier">Invariant</span></a></a><span> </span><span class="hs-special">{</span><a name="invariant"><a href="Data.Generics.Uniplate.Data.Instances.html#invariant"><span class="hs-identifier">invariant</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679033835"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679033835"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><a name="fromInvariant"><a href="Data.Generics.Uniplate.Data.Instances.html#fromInvariant"><span class="hs-identifier">fromInvariant</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><a href="#local-6989586621679033835"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">}</span><span>
</span><a name="line-157"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span>
</span><a name="line-158"></a><span>
</span><a name="line-159"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679034911"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span> </span><a href="#local-6989586621679034911"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-160"></a><span>    </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><span class="hs-identifier">_</span><span> </span><a name="local-6989586621679034912"><a href="#local-6989586621679034912"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Invariant &quot;</span><span> </span><span class="hs-operator hs-var">++</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679034912"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-161"></a><span>
</span><a name="line-162"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span> </span><a href="#local-6989586621679034887"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span> </span><a href="#local-6989586621679034887"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Data</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span> </span><a href="#local-6989586621679034887"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-163"></a><span>    </span><a name="local-8214565720323786787"><span class="hs-identifier">gfoldl</span></a><span> </span><a name="local-6989586621679034888"><a href="#local-6989586621679034888"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679034889"><a href="#local-6989586621679034889"><span class="hs-identifier">z</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><a name="local-6989586621679034890"><a href="#local-6989586621679034890"><span class="hs-identifier">f</span></a></a><span> </span><a name="local-6989586621679034891"><a href="#local-6989586621679034891"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034889"><span class="hs-identifier hs-var">z</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><a href="#local-6989586621679034890"><span class="hs-identifier hs-var">f</span></a><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="#local-6989586621679034890"><span class="hs-identifier hs-var">f</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">`</span><a href="#local-6989586621679034888"><span class="hs-identifier hs-var">k</span></a><span class="hs-special">`</span><span> </span><a href="#local-6989586621679034891"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-164"></a><span>    </span><a name="local-8214565720323786786"><span class="hs-identifier">gunfold</span></a><span> </span><a name="local-6989586621679034892"><a href="#local-6989586621679034892"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679034893"><a href="#local-6989586621679034893"><span class="hs-identifier">z</span></a></a><span> </span><a name="local-6989586621679034894"><a href="#local-6989586621679034894"><span class="hs-identifier">c</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034892"><span class="hs-identifier hs-var">k</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679034893"><span class="hs-identifier hs-var">z</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679034896"><a href="#local-6989586621679034896"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">error</span><span> </span><a href="#local-6989586621679034895"><span class="hs-identifier hs-var">msg</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">error</span><span> </span><a href="#local-6989586621679034895"><span class="hs-identifier hs-var">msg</span></a><span> </span><span class="hs-special">`</span><span class="hs-identifier hs-var">asTypeOf</span><span class="hs-special">`</span><span> </span><a href="#local-6989586621679034896"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-165"></a><span>        </span><span class="hs-keyword">where</span><span> </span><a name="local-6989586621679034895"><a href="#local-6989586621679034895"><span class="hs-identifier">msg</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-string">&quot;Data.Generics.Uniplate.Data.Instances.Invariant: gunfold only partially implemented&quot;</span><span>
</span><a name="line-166"></a><span>    </span><a name="local-8214565720323786785"><span class="hs-identifier">toConstr</span></a><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#conInvariant"><span class="hs-identifier hs-var">conInvariant</span></a><span>
</span><a name="line-167"></a><span>    </span><a name="local-8214565720323786784"><span class="hs-identifier">dataTypeOf</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#tyInvariant"><span class="hs-identifier hs-var">tyInvariant</span></a><span>
</span><a name="line-168"></a><span>
</span><a name="line-169"></a><a name="conInvariant"><a href="Data.Generics.Uniplate.Data.Instances.html#conInvariant"><span class="hs-identifier">conInvariant</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkConstr</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#tyInvariant"><span class="hs-identifier hs-var">tyInvariant</span></a><span> </span><span class="hs-string">&quot;Invariant&quot;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-identifier hs-var">Prefix</span><span>
</span><a name="line-170"></a><a name="tyInvariant"><a href="Data.Generics.Uniplate.Data.Instances.html#tyInvariant"><span class="hs-identifier">tyInvariant</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">mkDataType</span><span> </span><span class="hs-string">&quot;Data.Generics.Uniplate.Data.Instances.Invariant&quot;</span><span> </span><span class="hs-special">[</span><a href="Data.Generics.Uniplate.Data.Instances.html#conInvariant"><span class="hs-identifier hs-var">conInvariant</span></a><span class="hs-special">]</span><span>
</span><a name="line-171"></a><span>
</span><a name="line-172"></a><span>
</span><a name="line-173"></a><span class="hs-comment">---------------------------------------------------------------------</span><span>
</span><a name="line-174"></a><span class="hs-comment">-- DATA TYPES</span><span>
</span><a name="line-175"></a><span>
</span><a name="line-176"></a><span class="hs-comment">-- | Invariant preserving version of @Map@ from the @containers@ packages, suitable for use with 'Uniplate'.</span><span>
</span><a name="line-177"></a><span class="hs-comment">--   Use 'toMap' to construct values, and 'fromMap' to deconstruct values.</span><span>
</span><a name="line-178"></a><span class="hs-keyword">newtype</span><span> </span><a name="Map"><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier">Map</span></a></a><span> </span><a name="local-6989586621679033833"><a href="#local-6989586621679033833"><span class="hs-identifier">k</span></a></a><span> </span><a name="local-6989586621679033834"><a href="#local-6989586621679033834"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Map"><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier">Map</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679033833"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679033834"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Map.Map</span><span> </span><a href="#local-6989586621679033833"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679033834"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-179"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-180"></a><span>
</span><a name="line-181"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679034885"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679034886"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-type">Map</span></a><span> </span><a href="#local-6989586621679034885"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034886"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier hs-var">fromMap</span></a><span>
</span><a name="line-182"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679034881"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679034882"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-type">Map</span></a><span> </span><a href="#local-6989586621679034881"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034882"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-6989586621679034883"><a href="#local-6989586621679034883"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><a name="local-6989586621679034884"><a href="#local-6989586621679034884"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier hs-var">fromMap</span></a><span> </span><a href="#local-6989586621679034883"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier hs-var">fromMap</span></a><span> </span><a href="#local-6989586621679034884"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-183"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679034877"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679034878"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-type">Map</span></a><span> </span><a href="#local-6989586621679034877"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034878"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><a name="local-6989586621679034879"><a href="#local-6989586621679034879"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679034880"><a href="#local-6989586621679034880"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier hs-var">fromMap</span></a><span> </span><a href="#local-6989586621679034879"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier hs-var">fromMap</span></a><span> </span><a href="#local-6989586621679034880"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-184"></a><span>
</span><a name="line-185"></a><span class="hs-comment">-- | Deconstruct a value of type 'Map'.</span><span>
</span><a name="line-186"></a><span class="hs-identifier">fromMap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-type">Map</span></a><span> </span><a href="#local-6989586621679034940"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034941"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Map.Map</span><span> </span><a href="#local-6989586621679034940"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034941"><span class="hs-identifier hs-type">v</span></a><span>
</span><a name="line-187"></a><a name="fromMap"><a href="Data.Generics.Uniplate.Data.Instances.html#fromMap"><span class="hs-identifier">fromMap</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-var">Map</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a name="local-6989586621679034942"><a href="#local-6989586621679034942"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034942"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-188"></a><span>
</span><a name="line-189"></a><span class="hs-comment">-- | Construct a value of type 'Map'.</span><span>
</span><a name="line-190"></a><span class="hs-identifier">toMap</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679034938"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Map.Map</span><span> </span><a href="#local-6989586621679034938"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034939"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-type">Map</span></a><span> </span><a href="#local-6989586621679034938"><span class="hs-identifier hs-type">k</span></a><span> </span><a href="#local-6989586621679034939"><span class="hs-identifier hs-type">v</span></a><span>
</span><a name="line-191"></a><a name="toMap"><a href="Data.Generics.Uniplate.Data.Instances.html#toMap"><span class="hs-identifier">toMap</span></a></a><span> </span><a name="local-6989586621679034943"><a href="#local-6989586621679034943"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Map"><span class="hs-identifier hs-var">Map</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><a href="#local-6989586621679034945"><span class="hs-identifier hs-var">inv</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679034944"><span class="hs-identifier hs-var">create</span></a><span> </span><a href="#local-6989586621679034943"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-192"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-193"></a><span>        </span><a name="local-6989586621679034944"><a href="#local-6989586621679034944"><span class="hs-identifier">create</span></a></a><span> </span><a name="local-6989586621679034946"><a href="#local-6989586621679034946"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a href="#local-6989586621679034947"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a href="#local-6989586621679034948"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a href="#local-6989586621679034946"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-194"></a><span>            </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679034947"><a href="#local-6989586621679034947"><span class="hs-identifier">ks</span></a></a><span class="hs-special">,</span><a name="local-6989586621679034948"><a href="#local-6989586621679034948"><span class="hs-identifier">vs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unzip</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.toAscList</span><span> </span><a href="#local-6989586621679034946"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-195"></a><span>
</span><a name="line-196"></a><span>        </span><a name="local-6989586621679034945"><a href="#local-6989586621679034945"><span class="hs-identifier">inv</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679035139"><a href="#local-6989586621679035139"><span class="hs-identifier">ks</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035140"><a href="#local-6989586621679035140"><span class="hs-identifier">vs</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035141"><a href="#local-6989586621679035141"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-197"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">trigger</span><span> </span><a href="#local-6989586621679035139"><span class="hs-identifier hs-var">ks</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034944"><span class="hs-identifier hs-var">create</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.fromList</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">zip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035139"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035140"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">)</span><span>
</span><a name="line-198"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">trigger</span><span> </span><a href="#local-6989586621679035140"><span class="hs-identifier hs-var">vs</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679034944"><span class="hs-identifier hs-var">create</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Map.fromDistinctAscList</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">zip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035139"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035140"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">)</span><span> </span><span class="hs-comment">-- recreate ks/vs to reduce memory usage</span><span>
</span><a name="line-199"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035139"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">,</span><a href="#local-6989586621679035140"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">,</span><a href="#local-6989586621679035141"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-200"></a><span>
</span><a name="line-201"></a><span>
</span><a name="line-202"></a><span class="hs-comment">-- | Invariant preserving version of @Set@ from the @containers@ packages, suitable for use with 'Uniplate'.</span><span>
</span><a name="line-203"></a><span class="hs-comment">--   Use 'toSet' to construct values, and 'fromSet' to deconstruct values.</span><span>
</span><a name="line-204"></a><span class="hs-keyword">newtype</span><span> </span><a name="Set"><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier">Set</span></a></a><span> </span><a name="local-6989586621679033832"><a href="#local-6989586621679033832"><span class="hs-identifier">k</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Set"><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier">Set</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679033832"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Set.Set</span><span> </span><a href="#local-6989586621679033832"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-205"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-206"></a><span>
</span><a name="line-207"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679034876"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-type">Set</span></a><span> </span><a href="#local-6989586621679034876"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier hs-var">fromSet</span></a><span>
</span><a name="line-208"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679034873"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-type">Set</span></a><span> </span><a href="#local-6989586621679034873"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-6989586621679034874"><a href="#local-6989586621679034874"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><a name="local-6989586621679034875"><a href="#local-6989586621679034875"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier hs-var">fromSet</span></a><span> </span><a href="#local-6989586621679034874"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier hs-var">fromSet</span></a><span> </span><a href="#local-6989586621679034875"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-209"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679034870"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-type">Set</span></a><span> </span><a href="#local-6989586621679034870"><span class="hs-identifier hs-type">k</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><a name="local-6989586621679034871"><a href="#local-6989586621679034871"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679034872"><a href="#local-6989586621679034872"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier hs-var">fromSet</span></a><span> </span><a href="#local-6989586621679034871"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier hs-var">fromSet</span></a><span> </span><a href="#local-6989586621679034872"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-210"></a><span>
</span><a name="line-211"></a><span class="hs-comment">-- | Deconstruct a value of type 'Set'.</span><span>
</span><a name="line-212"></a><span class="hs-identifier">fromSet</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-type">Set</span></a><span> </span><a href="#local-6989586621679034937"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Set.Set</span><span> </span><a href="#local-6989586621679034937"><span class="hs-identifier hs-type">k</span></a><span>
</span><a name="line-213"></a><a name="fromSet"><a href="Data.Generics.Uniplate.Data.Instances.html#fromSet"><span class="hs-identifier">fromSet</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-var">Set</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a name="local-6989586621679035142"><a href="#local-6989586621679035142"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035142"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-214"></a><span>
</span><a name="line-215"></a><span class="hs-comment">-- | Construct a value of type 'Set'.</span><span>
</span><a name="line-216"></a><span class="hs-identifier">toSet</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679034936"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Set.Set</span><span> </span><a href="#local-6989586621679034936"><span class="hs-identifier hs-type">k</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-type">Set</span></a><span> </span><a href="#local-6989586621679034936"><span class="hs-identifier hs-type">k</span></a><span>
</span><a name="line-217"></a><a name="toSet"><a href="Data.Generics.Uniplate.Data.Instances.html#toSet"><span class="hs-identifier">toSet</span></a></a><span> </span><a name="local-6989586621679035143"><a href="#local-6989586621679035143"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Set"><span class="hs-identifier hs-var">Set</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><a href="#local-6989586621679035145"><span class="hs-identifier hs-var">inv</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679035144"><span class="hs-identifier hs-var">create</span></a><span> </span><a href="#local-6989586621679035143"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-218"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-219"></a><span>        </span><a name="local-6989586621679035144"><a href="#local-6989586621679035144"><span class="hs-identifier">create</span></a></a><span> </span><a name="local-6989586621679035146"><a href="#local-6989586621679035146"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Set.toList</span><span> </span><a href="#local-6989586621679035146"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a href="#local-6989586621679035146"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span>        </span><a name="local-6989586621679035145"><a href="#local-6989586621679035145"><span class="hs-identifier">inv</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679035147"><a href="#local-6989586621679035147"><span class="hs-identifier">ks</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035148"><a href="#local-6989586621679035148"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-222"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">trigger</span><span> </span><a href="#local-6989586621679035147"><span class="hs-identifier hs-var">ks</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035144"><span class="hs-identifier hs-var">create</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">Set.fromList</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035147"><span class="hs-identifier hs-var">ks</span></a><span>
</span><a name="line-223"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035147"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">,</span><a href="#local-6989586621679035148"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-224"></a><span>
</span><a name="line-225"></a><span>
</span><a name="line-226"></a><span class="hs-comment">-- | Invariant preserving version of @IntMap@ from the @containers@ packages, suitable for use with 'Uniplate'.</span><span>
</span><a name="line-227"></a><span class="hs-comment">--   Use 'toIntMap' to construct values, and 'fromIntMap' to deconstruct values.</span><span>
</span><a name="line-228"></a><span class="hs-keyword">newtype</span><span> </span><a name="IntMap"><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier">IntMap</span></a></a><span> </span><a name="local-6989586621679033831"><a href="#local-6989586621679033831"><span class="hs-identifier">v</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="IntMap"><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier">IntMap</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-special">[</span><a href="#local-6989586621679033831"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IntMap.IntMap</span><span> </span><a href="#local-6989586621679033831"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-229"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-230"></a><span>
</span><a name="line-231"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="#local-6989586621679034869"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-type">IntMap</span></a><span> </span><a href="#local-6989586621679034869"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier hs-var">fromIntMap</span></a><span>
</span><a name="line-232"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="#local-6989586621679034866"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-type">IntMap</span></a><span> </span><a href="#local-6989586621679034866"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-6989586621679034867"><a href="#local-6989586621679034867"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><a name="local-6989586621679034868"><a href="#local-6989586621679034868"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier hs-var">fromIntMap</span></a><span> </span><a href="#local-6989586621679034867"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier hs-var">fromIntMap</span></a><span> </span><a href="#local-6989586621679034868"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-233"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="#local-6989586621679034863"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-type">IntMap</span></a><span> </span><a href="#local-6989586621679034863"><span class="hs-identifier hs-type">v</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><a name="local-6989586621679034864"><a href="#local-6989586621679034864"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679034865"><a href="#local-6989586621679034865"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier hs-var">fromIntMap</span></a><span> </span><a href="#local-6989586621679034864"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier hs-var">fromIntMap</span></a><span> </span><a href="#local-6989586621679034865"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-234"></a><span>
</span><a name="line-235"></a><span class="hs-comment">-- | Deconstruct a value of type 'IntMap'.</span><span>
</span><a name="line-236"></a><span class="hs-identifier">fromIntMap</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-type">IntMap</span></a><span> </span><a href="#local-6989586621679034935"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IntMap.IntMap</span><span> </span><a href="#local-6989586621679034935"><span class="hs-identifier hs-type">v</span></a><span>
</span><a name="line-237"></a><a name="fromIntMap"><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntMap"><span class="hs-identifier">fromIntMap</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-var">IntMap</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a name="local-6989586621679035149"><a href="#local-6989586621679035149"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035149"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-238"></a><span>
</span><a name="line-239"></a><span class="hs-comment">-- | Construct a value of type 'IntMap'.</span><span>
</span><a name="line-240"></a><span class="hs-identifier">toIntMap</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IntMap.IntMap</span><span> </span><a href="#local-6989586621679034934"><span class="hs-identifier hs-type">v</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-type">IntMap</span></a><span> </span><a href="#local-6989586621679034934"><span class="hs-identifier hs-type">v</span></a><span>
</span><a name="line-241"></a><a name="toIntMap"><a href="Data.Generics.Uniplate.Data.Instances.html#toIntMap"><span class="hs-identifier">toIntMap</span></a></a><span> </span><a name="local-6989586621679035150"><a href="#local-6989586621679035150"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntMap"><span class="hs-identifier hs-var">IntMap</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><a href="#local-6989586621679035152"><span class="hs-identifier hs-var">inv</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679035151"><span class="hs-identifier hs-var">create</span></a><span> </span><a href="#local-6989586621679035150"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-242"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-243"></a><span>        </span><a name="local-6989586621679035151"><a href="#local-6989586621679035151"><span class="hs-identifier">create</span></a></a><span> </span><a name="local-6989586621679035153"><a href="#local-6989586621679035153"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a href="#local-6989586621679035154"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><a href="#local-6989586621679035155"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a href="#local-6989586621679035153"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-244"></a><span>            </span><span class="hs-keyword">where</span><span> </span><span class="hs-special">(</span><a name="local-6989586621679035154"><a href="#local-6989586621679035154"><span class="hs-identifier">ks</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035155"><a href="#local-6989586621679035155"><span class="hs-identifier">vs</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unzip</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IntMap.toAscList</span><span> </span><a href="#local-6989586621679035153"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span>        </span><a name="local-6989586621679035152"><a href="#local-6989586621679035152"><span class="hs-identifier">inv</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679035156"><a href="#local-6989586621679035156"><span class="hs-identifier">ks</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035157"><a href="#local-6989586621679035157"><span class="hs-identifier">vs</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035158"><a href="#local-6989586621679035158"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-247"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">trigger</span><span> </span><a href="#local-6989586621679035156"><span class="hs-identifier hs-var">ks</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035151"><span class="hs-identifier hs-var">create</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IntMap.fromList</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">zip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035156"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035157"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">)</span><span>
</span><a name="line-248"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">trigger</span><span> </span><a href="#local-6989586621679035157"><span class="hs-identifier hs-var">vs</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035151"><span class="hs-identifier hs-var">create</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IntMap.fromDistinctAscList</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">zip</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035156"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035157"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">)</span><span> </span><span class="hs-comment">-- recreate ks/vs to reduce memory usage</span><span>
</span><a name="line-249"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035156"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">,</span><a href="#local-6989586621679035157"><span class="hs-identifier hs-var">vs</span></a><span class="hs-special">,</span><a href="#local-6989586621679035158"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-250"></a><span>
</span><a name="line-251"></a><span>
</span><a name="line-252"></a><span class="hs-comment">-- | Invariant preserving version of @IntSet@ from the @containers@ packages, suitable for use with 'Uniplate'.</span><span>
</span><a name="line-253"></a><span class="hs-comment">--   Use 'toIntSet' to construct values, and 'fromIntSet' to deconstruct values.</span><span>
</span><a name="line-254"></a><span class="hs-keyword">newtype</span><span> </span><a name="IntSet"><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier">IntSet</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="IntSet"><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier">IntSet</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-type">Invariant</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-type">Trigger</span></a><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">Int</span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-type">Hide</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">IntSet.IntSet</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><a name="line-255"></a><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Data</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-256"></a><span>
</span><a name="line-257"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-type">IntSet</span></a><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790323"><span class="hs-identifier">show</span></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">show</span><span> </span><span class="hs-operator hs-var">.</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier hs-var">fromIntSet</span></a><span>
</span><a name="line-258"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-type">IntSet</span></a><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-6989586621679034861"><a href="#local-6989586621679034861"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><a name="local-6989586621679034862"><a href="#local-6989586621679034862"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier hs-var">fromIntSet</span></a><span> </span><a href="#local-6989586621679034861"><span class="hs-identifier hs-var">a</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier hs-var">fromIntSet</span></a><span> </span><a href="#local-6989586621679034862"><span class="hs-identifier hs-var">b</span></a><span>
</span><a name="line-259"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-type">IntSet</span></a><span> </span><span class="hs-keyword">where</span><span class="hs-special">;</span><span> </span><a name="local-8214565720323790496"><span class="hs-identifier">compare</span></a><span> </span><a name="local-6989586621679034859"><a href="#local-6989586621679034859"><span class="hs-identifier">a</span></a></a><span> </span><a name="local-6989586621679034860"><a href="#local-6989586621679034860"><span class="hs-identifier">b</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">compare</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier hs-var">fromIntSet</span></a><span> </span><a href="#local-6989586621679034859"><span class="hs-identifier hs-var">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier hs-var">fromIntSet</span></a><span> </span><a href="#local-6989586621679034860"><span class="hs-identifier hs-var">b</span></a><span class="hs-special">)</span><span>
</span><a name="line-260"></a><span>
</span><a name="line-261"></a><span class="hs-comment">-- | Deconstruct a value of type 'IntSet'.</span><span>
</span><a name="line-262"></a><span class="hs-identifier">fromIntSet</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-type">IntSet</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IntSet.IntSet</span><span>
</span><a name="line-263"></a><a name="fromIntSet"><a href="Data.Generics.Uniplate.Data.Instances.html#fromIntSet"><span class="hs-identifier">fromIntSet</span></a></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-var">IntSet</span></a><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-special">(</span><span class="hs-identifier">_</span><span class="hs-special">,</span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a name="local-6989586621679035159"><a href="#local-6989586621679035159"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035159"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-264"></a><span>
</span><a name="line-265"></a><span class="hs-comment">-- | Construct a value of type 'IntSet'.</span><span>
</span><a name="line-266"></a><span class="hs-identifier">toIntSet</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IntSet.IntSet</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-type">IntSet</span></a><span>
</span><a name="line-267"></a><a name="toIntSet"><a href="Data.Generics.Uniplate.Data.Instances.html#toIntSet"><span class="hs-identifier">toIntSet</span></a></a><span> </span><a name="local-6989586621679035160"><a href="#local-6989586621679035160"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#IntSet"><span class="hs-identifier hs-var">IntSet</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Invariant"><span class="hs-identifier hs-var">Invariant</span></a><span> </span><a href="#local-6989586621679035162"><span class="hs-identifier hs-var">inv</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="#local-6989586621679035161"><span class="hs-identifier hs-var">create</span></a><span> </span><a href="#local-6989586621679035160"><span class="hs-identifier hs-var">x</span></a><span>
</span><a name="line-268"></a><span>    </span><span class="hs-keyword">where</span><span>
</span><a name="line-269"></a><span>        </span><a name="local-6989586621679035161"><a href="#local-6989586621679035161"><span class="hs-identifier">create</span></a></a><span> </span><a name="local-6989586621679035163"><a href="#local-6989586621679035163"><span class="hs-identifier">x</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="Data.Generics.Uniplate.Data.Instances.html#Trigger"><span class="hs-identifier hs-var">Trigger</span></a><span> </span><span class="hs-identifier hs-var">False</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IntSet.toList</span><span> </span><a href="#local-6989586621679035163"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">,</span><span> </span><a href="Data.Generics.Uniplate.Data.Instances.html#Hide"><span class="hs-identifier hs-var">Hide</span></a><span> </span><a href="#local-6989586621679035163"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-270"></a><span>
</span><a name="line-271"></a><span>        </span><a name="local-6989586621679035162"><a href="#local-6989586621679035162"><span class="hs-identifier">inv</span></a></a><span> </span><span class="hs-special">(</span><a name="local-6989586621679035164"><a href="#local-6989586621679035164"><span class="hs-identifier">ks</span></a></a><span class="hs-special">,</span><a name="local-6989586621679035165"><a href="#local-6989586621679035165"><span class="hs-identifier">x</span></a></a><span class="hs-special">)</span><span>
</span><a name="line-272"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier">trigger</span><span> </span><a href="#local-6989586621679035164"><span class="hs-identifier hs-var">ks</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="#local-6989586621679035161"><span class="hs-identifier hs-var">create</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier hs-var">IntSet.fromList</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-identifier">fromTrigger</span><span> </span><a href="#local-6989586621679035164"><span class="hs-identifier hs-var">ks</span></a><span>
</span><a name="line-273"></a><span>            </span><span class="hs-glyph">|</span><span> </span><span class="hs-identifier hs-var">otherwise</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679035164"><span class="hs-identifier hs-var">ks</span></a><span class="hs-special">,</span><a href="#local-6989586621679035165"><span class="hs-identifier hs-var">x</span></a><span class="hs-special">)</span><span>
</span><a name="line-274"></a></pre></body></html>